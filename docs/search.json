[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Kiki",
    "section": "",
    "text": "In summer 2010, I was walking by the (now closed) pet store in Williamsburg, Brooklyn, and I fell in love with a puppy in the window. There was something about her and somehow I knew right away that she was special and that I needed to get her right that second. She was the best impulse purchase of my life and she turned out to be the most amazing, lovable and gentle creature one could imagine. Kiki was absolutely perfect and we loved her more than anything.\n    She moved with us across country (and then came back), flew on a plane to visit her grandparents in Arizona for Christmases and birthdays, and traveled internationally (OK, we drove with her to Canada a few times, but it still counts). When she got sick and could not longer walk far, we got a stroller to take her on walks because she loved being outside and she loved people watching. She was a fighter - once she was given 6 months to live and she made it into 2 years and we fought for her each and every extra day.\n    It’s been 1 year, 1 month, and 19 days since she’s been gone but I love her just as much and I know I always will."
  },
  {
    "objectID": "mp1.html",
    "href": "mp1.html",
    "title": "Mini-Project 1",
    "section": "",
    "text": "In this part, I created the base table for data analysis using the code provided in the assignment. I also modified column names (Task 1) and recoded the values in the ‘Mode’ column to make them easier to understand and use for analysis (Task 2)."
  },
  {
    "objectID": "mp1.html#task-1---creating-syntatic-names",
    "href": "mp1.html#task-1---creating-syntatic-names",
    "title": "Mini-Project 1",
    "section": "Task 1 - Creating Syntatic Names",
    "text": "Task 1 - Creating Syntatic Names"
  },
  {
    "objectID": "mp1.html#task-2---recoding-the-mode-column",
    "href": "mp1.html#task-2---recoding-the-mode-column",
    "title": "Mini-Project 1",
    "section": "",
    "text": "# A tibble: 3 × 2\n  Agency                                                     total_vrm\n  &lt;chr&gt;                                                          &lt;dbl&gt;\n1 MTA New York City Transit                                10832855350\n2 New Jersey Transit Corporation                            5645525525\n3 Los Angeles County Metropolitan Transportation Authority  4354016659\n\n\n\n\n# A tibble: 3 × 2\n  Mode              total_vrm\n  &lt;chr&gt;                 &lt;dbl&gt;\n1 Bus             49444494088\n2 Demand Response 17955073508\n3 Heavy Rail      14620362107\n\n\n\n\n# A tibble: 3 × 1\n    total_vrm\n        &lt;dbl&gt;\n1 14620362107\n2          NA\n3          NA"
  },
  {
    "objectID": "mp1.html#testing-gt-package",
    "href": "mp1.html#testing-gt-package",
    "title": "Mini-Project 1",
    "section": "",
    "text": "#if(!require(“gt”)) install.packages(“gt”) #library(gt)\n#sample_n(USAGE, 100) |&gt; # gt()|&gt; # tab_header( # title=“Table 1” # )"
  },
  {
    "objectID": "mp1.html#part-1---getting-data-ready-for-analysis.",
    "href": "mp1.html#part-1---getting-data-ready-for-analysis.",
    "title": "Mini-Project 1",
    "section": "",
    "text": "In this part, I created the base table for data analysis using the provided in the assignment code. I also modified column names (Task 1) and recoded the values in the ‘Mode’ column to make them easier to understand and use for analysis (Task 2)."
  },
  {
    "objectID": "mp1.html#part-2---analyzing-transit-data.",
    "href": "mp1.html#part-2---analyzing-transit-data.",
    "title": "Mini-Project 1",
    "section": "Part 2 - Analyzing transit data.",
    "text": "Part 2 - Analyzing transit data.\n\nQ1. What transit agency had the most total VRM in this dataset?\nNot surprisingly, MTA New York City Transit has the largest total VRM in this dataset. Its total of 10.8B+ trips is almost double the total miles recorded by New Jersey Transit Corporation, the agency with the second largest result.\n\n\n# A tibble: 3 × 2\n  Agency                                                     total_vrm\n  &lt;chr&gt;                                                          &lt;dbl&gt;\n1 MTA New York City Transit                                10832855350\n2 New Jersey Transit Corporation                            5645525525\n3 Los Angeles County Metropolitan Transportation Authority  4354016659\n\n\n\n\nQ2. What transit mode had the most total VRM in this dataset?\nWith over 49 billion miles, bus has the most total VRM in this dataset.\n\n\n# A tibble: 3 × 2\n  Mode              total_vrm\n  &lt;chr&gt;                 &lt;dbl&gt;\n1 Bus             49444494088\n2 Demand Response 17955073508\n3 Heavy Rail      14620362107\n\n\n\n\nQ3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\nThere were slightly over 180 million trips on NYC Subway in May 2024.\n\n\n# A tibble: 1 × 1\n  total_trips\n        &lt;dbl&gt;\n1   180458819\n\n\n\n\nQ5. How much did NYC subway ridership fall between April 2019 and April 2020?\nNYC subway ridership fell by 92% between April 2019 and April 2020 because of Covid pandemic.\n\n\n# A tibble: 1 × 3\n  apr19_trips apr20_trips pct_change\n        &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;\n1   232223929    20254269     -0.913"
  },
  {
    "objectID": "mp1.html#task-1-2---getting-data-ready-for-analysis.",
    "href": "mp1.html#task-1-2---getting-data-ready-for-analysis.",
    "title": "Mini-Project 1",
    "section": "",
    "text": "In this part, I created the base table for data analysis using the code provided in the assignment. I also modified column names (Task 1) and recoded the values in the ‘Mode’ column to make them easier to understand and use for analysis (Task 2)."
  },
  {
    "objectID": "mp1.html#task-3---analyzing-transit-data.",
    "href": "mp1.html#task-3---analyzing-transit-data.",
    "title": "Mini-Project 1",
    "section": "Task 3 - Analyzing transit data.",
    "text": "Task 3 - Analyzing transit data.\n\nQ1. What transit agency had the most total VRM in this dataset?\nNot surprisingly, MTA New York City Transit has the largest total mileage in this dataset. Its total of 10.8B+ trips is almost double of the amount attributed to New Jersey Transit Corporation, the agency with the second largest result.\n\n\n\n\n\n\n\n\nTop 3 Transit Agencies by Total VRM\n\n\nAgency\nTOTAL_VRM\n\n\n\n\nMTA New York City Transit\n10,832,855,350\n\n\nNew Jersey Transit Corporation\n5,645,525,525\n\n\nLos Angeles County Metropolitan Transportation Authority\n4,354,016,659\n\n\n\n\n\n\n\n\n\nQ2. What transit mode had the most total VRM in this dataset?\nWith over 49 billion miles, bus has the most total VRM in this dataset.\n\nUSAGE |&gt;\n  group_by(Mode) |&gt;\n  summarize(TOTAL_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n  mutate(TOTAL_VRM = comma(TOTAL_VRM, digits = 0)) |&gt;\n  slice_max(TOTAL_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Modes by Total VRM\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Modes by Total VRM\n\n\nMode\nTOTAL_VRM\n\n\n\n\nBus\n49,444,494,088\n\n\nDemand Response\n17,955,073,508\n\n\nHeavy Rail\n14,620,362,107\n\n\n\n\n\n\n\n\n\nQ3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\nThere were slightly over 180 million trips recorded on NYC Subway in May 2024.\n\n\n\n\n\n\n\n\nNYC Subway Trips in May'24\n\n\nTOTAL_TRIPS\n\n\n\n\n180,458,819\n\n\n\n\n\n\n\n\n\nQ5. How much did NYC subway ridership fall between April 2019 and April 2020?\nNYC subway ridership fell by 91% between April 2019 and April 2020 because of Covid pandemic.\n\n\n\n\n\n\n\n\nChange in NYC Subway Ridership\n\n\nAPR19_TRIPS\nAPR20_TRIPS\nPCT_CHANGE\n\n\n\n\n232,223,929\n20,254,269\n-91%"
  },
  {
    "objectID": "mp1.html#task-4---additional-analysis-of-transit-data.",
    "href": "mp1.html#task-4---additional-analysis-of-transit-data.",
    "title": "Mini-Project 1",
    "section": "Task 4 - Additional analysis of transit data.",
    "text": "Task 4 - Additional analysis of transit data."
  },
  {
    "objectID": "mp1.html#task-5---summary-data-for-2022.",
    "href": "mp1.html#task-5---summary-data-for-2022.",
    "title": "Mini-Project 1",
    "section": "Task 5 - Summary data for 2022.",
    "text": "Task 5 - Summary data for 2022.\nIn this part, I created a summary usage table for 2022 and joined it with available financial data."
  },
  {
    "objectID": "mp1.html#task-6---analysis-of-2022-data.",
    "href": "mp1.html#task-6---analysis-of-2022-data.",
    "title": "Mini-Project 1",
    "section": "Task 6 - Analysis of 2022 data.",
    "text": "Task 6 - Analysis of 2022 data.\n\nQ1. Which transit system (agency and mode) had the most UPT in 2022?\nNot surprisingly, NYC Subway had the largest volume of trips in 2022.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by UPT\n\n\n2022\n\n\nTRANSIT_SYSTEM\nUPT_TOTAL\n\n\n\n\nMTA New York City Transit_Heavy Rail\n1,793,073,801\n\n\nMTA New York City Transit_Bus\n458,602,305\n\n\nLos Angeles County Metropolitan Transportation Authority_Bus\n193,637,448\n\n\n\n\n\n\n\n\n\nQ2.Which transit system (agency and mode) had the highest farebox recovery, defined as the highest ratio of Total Fares to Expenses?\nIn 2022, ferryboat managed by Port Imperial Ferry Corp. had the highest farebox recovery ratio of 1.43.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Farebox Recovery\n\n\n2022\n\n\nTRANSIT_SYSTEM\nFAREBOX_RECOVERY\n\n\n\n\nPort Imperial Ferry Corporation_Ferryboat\n1.43\n\n\nHyannis Harbor Tours, Inc._Ferryboat\n1.41\n\n\nTrans-Bridge Lines, Inc._Commuter Bus\n1.33\n\n\n\n\n\n\n\n\n\nQ3.Which transit system (agency and mode) has the lowest expenses per UPT?\nIn 2022, North Carolina State University Bus had the lowest expenses per UPT of $1.18 per unlinked passenger trip.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Expenses per UPT\n\n\n2022\n\n\nTRANSIT_SYSTEM\nEXPENSES_PER_UPT\n\n\n\n\nNorth Carolina State University_Bus\n$1.18\n\n\nAnaheim Transportation Network_Bus\n$1.28\n\n\nUniversity of Iowa_Bus\n$1.54\n\n\n\n\n\n\n\n\n\nQ4.Which transit system (agency and mode) has the highest total fares per UPT?\nIn 2022, ferryboat managed by Cape May Lewes Ferry garnered the highest total fares per UPT of $9.23 per unlinked passenger trip.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Fares per UPT\n\n\n2022\n\n\nTRANSIT_SYSTEM\nFARES_PER_UPT\n\n\n\n\nCape May Lewes Ferry_Ferryboat\n$9.23\n\n\nVirginia Railway Express_Commuter Rail\n$9.01\n\n\nPort Imperial Ferry Corporation_Ferryboat\n$8.90\n\n\n\n\n\n\n\n\n\nQ5.Which transit system (agency and mode) has the lowest expenses per VRM?\nIn 2022, Vanpool managed by Metropolitan Transportation Commission achieved the lowest expenses per VRM of $0.44 per vehicle revenue mile.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Expenses per VRM\n\n\n2022\n\n\nTRANSIT_SYSTEM\nEXPENSES_PER_VRM\n\n\n\n\nMetropolitan Transportation Commission_Vanpool\n$0.44\n\n\nSan Joaquin Council_Vanpool\n$0.50\n\n\nSan Diego Association of Governments_Vanpool\n$0.54\n\n\n\n\n\n\n\n\n\nQ6.Which transit system (agency and mode) has the highest total fares per VRM?\nIn 2022, ferryboat managed by Cape May Lewes Ferry achieved higher fares per VRM than any other large transit system with UPT of at least 400,000.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Fares per VRM\n\n\n2022\n\n\nTRANSIT_SYSTEM\nFARES_PER_VRM\n\n\n\n\nCape May Lewes Ferry_Ferryboat\n$93.01\n\n\nWoods Hole, Martha's Vineyard and Nantucket Steamship Authority_Ferryboat\n$91.68\n\n\nAnaheim Transportation Network_Bus\n$9.42\n\n\n\n\n\n\n\n\n\nBased on the farebox recovery ratio, Ferryboat managed by Port Imperial Ferry Corporation appeared to be the most efficient transit system in 2022 among large transit systems with total annual UPT of 400,000+."
  },
  {
    "objectID": "mp1.html#task-4---additional-findings.",
    "href": "mp1.html#task-4---additional-findings.",
    "title": "Mini-Project 1",
    "section": "Task 4 - Additional findings.",
    "text": "Task 4 - Additional findings.\n\nFor additional analysis, I took a deeper look at the NYC transit system data and discovered the following:\n\nBased on the share of UPT, subway has been, by far, the most popular mode of transportation. In any given year, its share of UPT is at least 2X of the second most used transit mode.\nMoreover, based on the changes in the share of UPT, NYC subway usage has been slowly increasing over the years. Between 2002 and 2023, it gained 9 percentage points in relative share, going from 68.1% of total to 76.6% of total, respectively.\nAt the same time, there has been a corresponding decrease in Bus trips. Between 2002 and 2023, it lost 10 percentage points in relative share, going from 31.9% of total to 21.6% of total, respectively.\nBus Rapid Transit and Commuter Bus are newer modes of transportation, with data on their usage not available until 2012.\n\n\n\n\n\n\n\n\n\nNYC Transit System - Relative Shares of UPT by Transportation Mode\n\n\nYEAR\nBus\nDemand Response\nHeavy Rail\nBus Rapid Transit\nCommuter Bus\n\n\n\n\n2002\n31.9%\n0.0%\n68.1%\nNA\nNA\n\n\n2003\n31.0%\n0.0%\n69.0%\nNA\nNA\n\n\n2004\n29.0%\n0.1%\n71.0%\nNA\nNA\n\n\n2005\n30.4%\n0.1%\n69.5%\nNA\nNA\n\n\n2006\n29.0%\n0.1%\n70.9%\nNA\nNA\n\n\n2007\n26.5%\n0.1%\n73.4%\nNA\nNA\n\n\n2008\n26.2%\n0.2%\n73.7%\nNA\nNA\n\n\n2009\n26.3%\n0.2%\n73.5%\nNA\nNA\n\n\n2010\n25.2%\n0.2%\n74.6%\nNA\nNA\n\n\n2011\n24.1%\n0.1%\n75.7%\nNA\nNA\n\n\n2012\n22.5%\n0.1%\n76.0%\n0.9%\n0.4%\n\n\n2013\n22.2%\n0.2%\n76.7%\n0.6%\n0.4%\n\n\n2014\n21.4%\n0.2%\n77.5%\n0.6%\n0.4%\n\n\n2015\n21.6%\n0.2%\n77.3%\n0.6%\n0.4%\n\n\n2016\n21.4%\n0.2%\n77.2%\n0.8%\n0.4%\n\n\n2017\n20.1%\n0.2%\n78.5%\n0.9%\n0.4%\n\n\n2018\n20.5%\n0.2%\n78.0%\n0.9%\n0.4%\n\n\n2019\n20.0%\n0.1%\n78.7%\n0.9%\n0.3%\n\n\n2020\n26.2%\n0.2%\n72.2%\n1.1%\n0.3%\n\n\n2021\n22.7%\n0.1%\n75.9%\n0.9%\n0.3%\n\n\n2022\n20.1%\n0.1%\n78.7%\n0.7%\n0.4%\n\n\n2023\n21.6%\n0.1%\n76.8%\n1.2%\n0.3%\n\n\n2024\n23.0%\n0.1%\n75.2%\n1.4%\n0.4%"
  },
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "In this paper, we will look at high-level fiscal performance of US public transit systems. This work is not meant to be an in-depth analysis of the stated topic but rather an introductory, high-level overview. We will use data from the National Transit Database to analyze main indicators of usage and financial performance and determine what constitutes efficiency.\nData sources used and data availability and limitations are documented in detail in the assignment and could be accessed here."
  },
  {
    "objectID": "mp01.html#task-1-2---getting-data-ready-for-analysis.",
    "href": "mp01.html#task-1-2---getting-data-ready-for-analysis.",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Task 1 & 2 - Getting data ready for analysis.",
    "text": "Task 1 & 2 - Getting data ready for analysis.\nIn this part, I created the base table for data analysis using the code provided in the assignment. I also modified column names (Task 1) and recoded the values in the ‘Mode’ column to make them easier to understand and use for analysis (Task 2). Please use the\n\n# Installing and loading libraries\n\nif (!require(\"tidyverse\")) install.packages(\"tidyverse\")\nlibrary(tidyverse)\nif (!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nlibrary(dplyr)\n\n# Let's start with Fare Revenue\n\nFARES &lt;- readxl::read_xlsx(\"2022_fare_revenue.xlsx\") |&gt;\n  select(\n    -`State/Parent NTD ID`,\n    -`Reporter Type`,\n    -`Reporting Module`,\n    -`TOS`,\n    -`Passenger Paid Fares`,\n    -`Organization Paid Fares`\n  ) |&gt;\n  filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n  select(-`Expense Type`) |&gt;\n  group_by(\n    `NTD ID`, # Sum over different `TOS` for the same `Mode`\n    `Agency Name`, # These are direct operated and sub-contracted\n    `Mode`\n  ) |&gt; # of the same transit modality\n  # Not a big effect in most munis (significant DO\n  # tends to get rid of sub-contractors), but we'll sum\n  # to unify different passenger experiences\n  summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n  ungroup()\n\n# Next, expenses\n\nEXPENSES &lt;- readr::read_csv(\"2022_expenses.csv\") |&gt;\n  select(\n    `NTD ID`,\n    `Agency`,\n    `Total`,\n    `Mode`\n  ) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n  rename(Expenses = Total) |&gt;\n  group_by(`NTD ID`, `Mode`) |&gt;\n  summarize(Expenses = sum(Expenses)) |&gt;\n  ungroup()\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\n# Monthly Transit Numbers\n\nTRIPS &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"UPT\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(\n    -`Legacy NTD ID`,\n    -`Reporter Type`,\n    -`Mode/Type of Service Status`,\n    -`UACE CD`,\n    -`TOS`\n  ) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`),\n    names_to = \"Month\",\n    values_to = \"UPT\"\n  ) |&gt;\n  drop_na() |&gt;\n  mutate(Month = my(Month)) # Parse _m_onth _y_ear date specs\n\nMILES &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"VRM\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(\n    -`Legacy NTD ID`,\n    -`Reporter Type`,\n    -`Mode/Type of Service Status`,\n    -`UACE CD`,\n    -`TOS`\n  ) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`),\n    names_to = \"Month\",\n    values_to = \"VRM\"\n  ) |&gt;\n  drop_na() |&gt;\n  group_by(\n    `NTD ID`, `Agency`, `UZA Name`,\n    `Mode`, `3 Mode`, Month\n  ) |&gt;\n  summarize(VRM = sum(VRM)) |&gt;\n  ungroup() |&gt;\n  mutate(Month = my(Month)) # Parse _m_onth _y_ear date specs\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`))\n\n## Task 1 - Creating syntatic names\n\nnames(USAGE)[3] &lt;- \"Metro_Area\"\n\n## Task 2 - Recoding the Mode column\n\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode = case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"\n  ))\n\n\nsample_n(USAGE, 100) |&gt;\n  mutate(Month = as.character(Month)) |&gt;\n  DT::datatable(\n    filter='top'\n  )"
  },
  {
    "objectID": "mp01.html#task-3---analyzing-transit-data.",
    "href": "mp01.html#task-3---analyzing-transit-data.",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Task 3 - Analyzing transit data.",
    "text": "Task 3 - Analyzing transit data.\n\nQ1. What transit agency had the most total VRM in this dataset?\nNot surprisingly, MTA New York City Transit has the largest total mileage in this dataset. Its total of 10.8B+ trips is almost double of the amount attributed to New Jersey Transit Corporation, the agency with the second largest result.\n\n# installing and loading additional libraries\n\nif (!require(\"formattable\")) install.packages(\"formattable\")\nlibrary(formattable)\nif (!require(\"gt\")) install.packages(\"gt\")\nlibrary(gt)\n\nUSAGE |&gt;\n  group_by(Agency) |&gt;\n  summarize(TOTAL_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n  mutate(TOTAL_VRM = comma(TOTAL_VRM, digits = 0)) |&gt;\n  slice_max(TOTAL_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Agencies by Total VRM\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Agencies by Total VRM\n\n\nAgency\nTOTAL_VRM\n\n\n\n\nMTA New York City Transit\n10,832,855,350\n\n\nNew Jersey Transit Corporation\n5,645,525,525\n\n\nLos Angeles County Metropolitan Transportation Authority\n4,354,016,659\n\n\n\n\n\n\n\n\n\nQ2. What transit mode had the most total VRM in this dataset?\nWith over 49 billion miles, bus has the most total VRM in this dataset.\n\nUSAGE |&gt;\n  group_by(Mode) |&gt;\n  summarize(TOTAL_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n  mutate(TOTAL_VRM = comma(TOTAL_VRM, digits = 0)) |&gt;\n  slice_max(TOTAL_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Modes by Total VRM\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Modes by Total VRM\n\n\nMode\nTOTAL_VRM\n\n\n\n\nBus\n49,444,494,088\n\n\nDemand Response\n17,955,073,508\n\n\nHeavy Rail\n14,620,362,107\n\n\n\n\n\n\n\n\n\nQ3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\nThere were slightly over 180 million trips recorded on NYC Subway in May 2024.\n\nUSAGE |&gt;\n  dplyr::filter(\n    Mode == \"Heavy Rail\",\n    Agency == \"MTA New York City Transit\",\n    Month == \"2024-05-01\"\n  ) |&gt;\n  summarize(TOTAL_TRIPS = sum(UPT, na.rm = TRUE)) |&gt;\n  mutate(TOTAL_TRIPS = comma(TOTAL_TRIPS, digits = 0)) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"NYC Subway Trips in May'24\"\n  )\n\n\n\n\n\n\n\nNYC Subway Trips in May'24\n\n\nTOTAL_TRIPS\n\n\n\n\n180,458,819\n\n\n\n\n\n\n\n\n\nQ5. How much did NYC subway ridership fall between April 2019 and April 2020?\nNYC subway ridership fell by 91% between April 2019 and April 2020 because of Covid pandemic.\n\nUSAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\" & Mode == \"Heavy Rail\") |&gt;\n  summarise(\n    APR19_TRIPS = sum(dplyr::case_when(Month == \"2019-04-01\" ~ UPT, TRUE ~ 0), na.rm = TRUE),\n    APR20_TRIPS = sum(dplyr::case_when(Month == \"2020-04-01\" ~ UPT, TRUE ~ 0), na.rm = TRUE),\n    PCT_CHANGE = (APR20_TRIPS - APR19_TRIPS) / APR19_TRIPS\n  ) |&gt;\n  mutate(\n    PCT_CHANGE = scales::percent(PCT_CHANGE),\n    APR19_TRIPS = comma(APR19_TRIPS, digits = 0),\n    APR20_TRIPS = comma(APR20_TRIPS, digits = 0)\n  ) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Change in NYC Subway Ridership\"\n  )\n\n\n\n\n\n\n\nChange in NYC Subway Ridership\n\n\nAPR19_TRIPS\nAPR20_TRIPS\nPCT_CHANGE\n\n\n\n\n232,223,929\n20,254,269\n-91%"
  },
  {
    "objectID": "mp01.html#task-4---additional-findings.",
    "href": "mp01.html#task-4---additional-findings.",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Task 4 - Additional findings.",
    "text": "Task 4 - Additional findings.\n\nFor additional analysis, I took a deeper look at the NYC transit system data and discovered the following:\n\nBased on the share of UPT, subway has been, by far, the most popular mode of transportation. In any given year, its share of UPT is at least 2X of the second most used transit mode.\nMoreover, based on the changes in the share of UPT, NYC subway usage has been slowly increasing over the years. Between 2002 and 2023, it gained 9 percentage points in relative share, going from 68.1% of total to 76.6% of total, respectively.\nAt the same time, there has been a corresponding decrease in Bus trips. Between 2002 and 2023, it lost 10 percentage points in relative share, going from 31.9% of total to 21.6% of total, respectively.\nBus Rapid Transit and Commuter Bus are newer modes of transportation, with data on their usage not available until 2012.\n\n\n# create df with annual totals\n\nnyc_annual_df &lt;- USAGE |&gt;\n  mutate(YEAR = format(as.Date(Month), \"%Y\")) |&gt;\n  dplyr::filter(Agency == \"MTA New York City Transit\") |&gt;\n  group_by(YEAR) |&gt;\n  summarize(TOTAL_TRIPS_ALL = sum(UPT, na.rm = TRUE)) |&gt;\n  ungroup()\n\n# create df with annual totals by mode\n\nnyc_mode_df &lt;- USAGE |&gt;\n  mutate(YEAR = format(as.Date(Month), \"%Y\")) |&gt;\n  dplyr::filter(Agency == \"MTA New York City Transit\") |&gt;\n  group_by(YEAR, Mode) |&gt;\n  summarize(TOTAL_TRIPS = sum(UPT, na.rm = TRUE)) |&gt;\n  ungroup()\n\n# join 2 dfs and calculate shares by mode\n\nnyc_joined_df &lt;- nyc_mode_df |&gt;\n  left_join(nyc_annual_df, by = \"YEAR\")\n\nnyc_joined_df2 &lt;- nyc_joined_df |&gt;\n  mutate(SHARE = TOTAL_TRIPS / TOTAL_TRIPS_ALL) |&gt;\n  mutate(SHARE = scales::percent(SHARE, accuracy = 0.1)) |&gt;\n  select(-TOTAL_TRIPS, -TOTAL_TRIPS_ALL)\n\n# pivot wide\n\nnyc_mode_df_pivoted &lt;- pivot_wider(nyc_joined_df2,\n  id_cols = YEAR,\n  names_from = Mode,\n  values_from = SHARE\n)\n\nnyc_mode_df_pivoted |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"NYC Transit System - Relative Shares of UPT by Transportation Mode\"\n  )\n\n\n\n\n\n\n\nNYC Transit System - Relative Shares of UPT by Transportation Mode\n\n\nYEAR\nBus\nDemand Response\nHeavy Rail\nBus Rapid Transit\nCommuter Bus\n\n\n\n\n2002\n31.9%\n0.0%\n68.1%\nNA\nNA\n\n\n2003\n31.0%\n0.0%\n69.0%\nNA\nNA\n\n\n2004\n29.0%\n0.1%\n71.0%\nNA\nNA\n\n\n2005\n30.4%\n0.1%\n69.5%\nNA\nNA\n\n\n2006\n29.0%\n0.1%\n70.9%\nNA\nNA\n\n\n2007\n26.5%\n0.1%\n73.4%\nNA\nNA\n\n\n2008\n26.2%\n0.2%\n73.7%\nNA\nNA\n\n\n2009\n26.3%\n0.2%\n73.5%\nNA\nNA\n\n\n2010\n25.2%\n0.2%\n74.6%\nNA\nNA\n\n\n2011\n24.1%\n0.1%\n75.7%\nNA\nNA\n\n\n2012\n22.5%\n0.1%\n76.0%\n0.9%\n0.4%\n\n\n2013\n22.2%\n0.2%\n76.7%\n0.6%\n0.4%\n\n\n2014\n21.4%\n0.2%\n77.5%\n0.6%\n0.4%\n\n\n2015\n21.6%\n0.2%\n77.3%\n0.6%\n0.4%\n\n\n2016\n21.4%\n0.2%\n77.2%\n0.8%\n0.4%\n\n\n2017\n20.1%\n0.2%\n78.5%\n0.9%\n0.4%\n\n\n2018\n20.5%\n0.2%\n78.0%\n0.9%\n0.4%\n\n\n2019\n20.0%\n0.1%\n78.7%\n0.9%\n0.3%\n\n\n2020\n26.2%\n0.2%\n72.2%\n1.1%\n0.3%\n\n\n2021\n22.7%\n0.1%\n75.9%\n0.9%\n0.3%\n\n\n2022\n20.1%\n0.1%\n78.7%\n0.7%\n0.4%\n\n\n2023\n21.6%\n0.1%\n76.8%\n1.2%\n0.3%\n\n\n2024\n23.0%\n0.1%\n75.2%\n1.4%\n0.4%"
  },
  {
    "objectID": "mp01.html#task-5---summary-data-for-2022.",
    "href": "mp01.html#task-5---summary-data-for-2022.",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Task 5 - Summary data for 2022.",
    "text": "Task 5 - Summary data for 2022.\nIn this part, I created a summary usage table for 2022 and joined it with available financial data.\n\n### 2022 table\n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  select(\n    `NTD ID`,\n    Agency,\n    Metro_Area,\n    Mode,\n    UPT,\n    VRM,\n    Month\n  ) |&gt;\n  filter(year(Month) == \"2022\") |&gt;\n  group_by(\n    `NTD ID`,\n    Agency,\n    Metro_Area,\n    Mode\n  ) |&gt;\n  summarise(\n    TOTAL_VRM = sum(VRM, na.rm = TRUE),\n    TOTAL_UPT = sum(UPT, na.rm = TRUE)\n  ) |&gt;\n  ungroup()\n\n# recode modes values\n\nFINANCIALS2 &lt;- FINANCIALS |&gt;\n  mutate(Mode = case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"\n  ))\n\n\nUSAGE_AND_FINANCIALS &lt;- left_join(\n  USAGE_2022_ANNUAL,\n  FINANCIALS2,\n  join_by(`NTD ID`, Mode)\n) |&gt;\n  drop_na()\n\n\nsample_n(USAGE_AND_FINANCIALS, 1132) |&gt;\n  DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-6---analysis-of-2022-data.",
    "href": "mp01.html#task-6---analysis-of-2022-data.",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Task 6 - Analysis of 2022 data.",
    "text": "Task 6 - Analysis of 2022 data.\n\nQ1. Which transit system (agency and mode) had the most UPT in 2022?\nNot surprisingly, NYC Subway had the largest volume of trips in 2022.\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(TRANSIT_SYSTEM, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(TRANSIT_SYSTEM) |&gt;\n  summarise(UPT_TOTAL = sum(TOTAL_UPT)) |&gt;\n  mutate(UPT_TOTAL = comma(UPT_TOTAL, digits = 0)) |&gt;\n  slice_max(UPT_TOTAL, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by UPT\",\n    subtitle = \"2022\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Systems by UPT\n\n\n2022\n\n\nTRANSIT_SYSTEM\nUPT_TOTAL\n\n\n\n\nMTA New York City Transit_Heavy Rail\n1,793,073,801\n\n\nMTA New York City Transit_Bus\n458,602,305\n\n\nLos Angeles County Metropolitan Transportation Authority_Bus\n193,637,448\n\n\n\n\n\n\n\n\n\nQ2.Which transit system (agency and mode) had the highest farebox recovery, defined as the highest ratio of Total Fares to Expenses?\nIn 2022, ferryboat managed by Port Imperial Ferry Corp. had the highest farebox recovery ratio of 1.43.\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(TRANSIT_SYSTEM, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(TRANSIT_SYSTEM) |&gt;\n  filter(sum(TOTAL_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(FAREBOX_RECOVERY = sum(`Total Fares`, na.rm = TRUE) / sum(Expenses, na.rm = TRUE)) |&gt;\n  mutate(FAREBOX_RECOVERY = comma(FAREBOX_RECOVERY, digits = 2)) |&gt;\n  ungroup() |&gt;\n  slice_max(FAREBOX_RECOVERY, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Farebox Recovery\",\n    subtitle = \"2022\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Systems by Farebox Recovery\n\n\n2022\n\n\nTRANSIT_SYSTEM\nFAREBOX_RECOVERY\n\n\n\n\nPort Imperial Ferry Corporation_Ferryboat\n1.43\n\n\nHyannis Harbor Tours, Inc._Ferryboat\n1.41\n\n\nTrans-Bridge Lines, Inc._Commuter Bus\n1.33\n\n\n\n\n\n\n\n\n\nQ3.Which transit system (agency and mode) has the lowest expenses per UPT?\nIn 2022, North Carolina State University Bus had the lowest expenses per UPT of $1.18 per unlinked passenger trip.\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(TRANSIT_SYSTEM, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(TRANSIT_SYSTEM) |&gt;\n  filter(sum(TOTAL_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(EXPENSES_PER_UPT = sum(Expenses, na.rm = TRUE) / sum(TOTAL_UPT, na.rm = TRUE)) |&gt;\n  mutate(EXPENSES_PER_UPT = scales::dollar(EXPENSES_PER_UPT)) |&gt;\n  ungroup() |&gt;\n  slice_min(EXPENSES_PER_UPT, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Expenses per UPT\",\n    subtitle = \"2022\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Systems by Expenses per UPT\n\n\n2022\n\n\nTRANSIT_SYSTEM\nEXPENSES_PER_UPT\n\n\n\n\nNorth Carolina State University_Bus\n$1.18\n\n\nAnaheim Transportation Network_Bus\n$1.28\n\n\nUniversity of Iowa_Bus\n$1.54\n\n\n\n\n\n\n\n\n\nQ4.Which transit system (agency and mode) has the highest total fares per UPT?\nIn 2022, ferryboat managed by Cape May Lewes Ferry garnered the highest total fares per UPT of $9.23 per unlinked passenger trip.\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(TRANSIT_SYSTEM, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(TRANSIT_SYSTEM) |&gt;\n  filter(sum(TOTAL_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(FARES_PER_UPT = sum(`Total Fares`, na.rm = TRUE) / sum(TOTAL_UPT, na.rm = TRUE)) |&gt;\n  mutate(FARES_PER_UPT = scales::dollar(FARES_PER_UPT)) |&gt;\n  ungroup() |&gt;\n  slice_max(FARES_PER_UPT, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Fares per UPT\",\n    subtitle = \"2022\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Systems by Fares per UPT\n\n\n2022\n\n\nTRANSIT_SYSTEM\nFARES_PER_UPT\n\n\n\n\nCape May Lewes Ferry_Ferryboat\n$9.23\n\n\nVirginia Railway Express_Commuter Rail\n$9.01\n\n\nPort Imperial Ferry Corporation_Ferryboat\n$8.90\n\n\n\n\n\n\n\n\n\nQ5.Which transit system (agency and mode) has the lowest expenses per VRM?\nIn 2022, Vanpool managed by Metropolitan Transportation Commission achieved the lowest expenses per VRM of $0.44 per vehicle revenue mile.\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(TRANSIT_SYSTEM, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(TRANSIT_SYSTEM) |&gt;\n  filter(sum(TOTAL_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(EXPENSES_PER_VRM = sum(Expenses, na.rm = TRUE) / sum(TOTAL_VRM, na.rm = TRUE)) |&gt;\n  mutate(EXPENSES_PER_VRM = scales::dollar(EXPENSES_PER_VRM)) |&gt;\n  ungroup() |&gt;\n  slice_min(EXPENSES_PER_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Expenses per VRM\",\n    subtitle = \"2022\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Systems by Expenses per VRM\n\n\n2022\n\n\nTRANSIT_SYSTEM\nEXPENSES_PER_VRM\n\n\n\n\nMetropolitan Transportation Commission_Vanpool\n$0.44\n\n\nSan Joaquin Council_Vanpool\n$0.50\n\n\nSan Diego Association of Governments_Vanpool\n$0.54\n\n\n\n\n\n\n\n\n\nQ6.Which transit system (agency and mode) has the highest total fares per VRM?\nIn 2022, ferryboat managed by Cape May Lewes Ferry achieved higher fares per VRM than any other large transit system with UPT of at least 400,000.\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(TRANSIT_SYSTEM, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(TRANSIT_SYSTEM) |&gt;\n  filter(sum(TOTAL_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(FARES_PER_VRM = sum(`Total Fares`, na.rm = TRUE) / sum(TOTAL_VRM, na.rm = TRUE)) |&gt;\n  mutate(FARES_PER_VRM = scales::dollar(FARES_PER_VRM)) |&gt;\n  ungroup() |&gt;\n  slice_max(FARES_PER_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Fares per VRM\",\n    subtitle = \"2022\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Systems by Fares per VRM\n\n\n2022\n\n\nTRANSIT_SYSTEM\nFARES_PER_VRM\n\n\n\n\nCape May Lewes Ferry_Ferryboat\n$93.01\n\n\nWoods Hole, Martha's Vineyard and Nantucket Steamship Authority_Ferryboat\n$91.68\n\n\nAnaheim Transportation Network_Bus\n$9.42\n\n\n\n\n\n\n\n\n\nBased on the farebox recovery ratio, Ferryboat managed by Port Imperial Ferry Corporation appeared to be the most efficient transit system in 2022 among large transit systems with total annual UPT of 400,000+."
  },
  {
    "objectID": "mp01.html#data-preparation",
    "href": "mp01.html#data-preparation",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Data Preparation",
    "text": "Data Preparation\nIn this part, I created the base table for data analysis using the code provided in the assignment. I also modified column names (per Task 1) and recoded the values in the ‘Mode’ column to make them easier to understand and use for analysis (per Task 2). The base table is provided for review after the code block (please note NTD ID and 3 Modes columns are excluded from the preview).\n\n# Installing and loading libraries\n\nif (!require(\"tidyverse\")) install.packages(\"tidyverse\")\nlibrary(tidyverse)\nif (!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nlibrary(dplyr)\n\n# Let's start with Fare Revenue\n\nFARES &lt;- readxl::read_xlsx(\"2022_fare_revenue.xlsx\") |&gt;\n  select(\n    -`State/Parent NTD ID`,\n    -`Reporter Type`,\n    -`Reporting Module`,\n    -`TOS`,\n    -`Passenger Paid Fares`,\n    -`Organization Paid Fares`\n  ) |&gt;\n  filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n  select(-`Expense Type`) |&gt;\n  group_by(\n    `NTD ID`, # Sum over different `TOS` for the same `Mode`\n    `Agency Name`, # These are direct operated and sub-contracted\n    `Mode`\n  ) |&gt; # of the same transit modality\n  # Not a big effect in most munis (significant DO\n  # tends to get rid of sub-contractors), but we'll sum\n  # to unify different passenger experiences\n  summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n  ungroup()\n\n# Next, expenses\n\nEXPENSES &lt;- readr::read_csv(\"2022_expenses.csv\") |&gt;\n  select(\n    `NTD ID`,\n    `Agency`,\n    `Total`,\n    `Mode`\n  ) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n  rename(Expenses = Total) |&gt;\n  group_by(`NTD ID`, `Mode`) |&gt;\n  summarize(Expenses = sum(Expenses)) |&gt;\n  ungroup()\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\n# Monthly Transit Numbers\n\nTRIPS &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"UPT\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(\n    -`Legacy NTD ID`,\n    -`Reporter Type`,\n    -`Mode/Type of Service Status`,\n    -`UACE CD`,\n    -`TOS`\n  ) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`),\n    names_to = \"Month\",\n    values_to = \"UPT\"\n  ) |&gt;\n  drop_na() |&gt;\n  mutate(Month = my(Month)) # Parse _m_onth _y_ear date specs\n\nMILES &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"VRM\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(\n    -`Legacy NTD ID`,\n    -`Reporter Type`,\n    -`Mode/Type of Service Status`,\n    -`UACE CD`,\n    -`TOS`\n  ) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`),\n    names_to = \"Month\",\n    values_to = \"VRM\"\n  ) |&gt;\n  drop_na() |&gt;\n  group_by(\n    `NTD ID`, `Agency`, `UZA Name`,\n    `Mode`, `3 Mode`, Month\n  ) |&gt;\n  summarize(VRM = sum(VRM)) |&gt;\n  ungroup() |&gt;\n  mutate(Month = my(Month)) # Parse _m_onth _y_ear date specs\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`))\n\n## Task 1 - Creating syntatic names\n\nnames(USAGE)[3] &lt;- \"Metro_Area\"\n\n## Task 2 - Recoding the Mode column\n\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode = case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"\n  ))\n\n# base table sampled\n\nsample_n(USAGE, 1000) |&gt;\n  select(-`NTD ID`, -`3 Mode`) |&gt;\n  mutate(Month = as.character(Month)) |&gt;\n  DT::datatable()"
  },
  {
    "objectID": "mp01.html#initial-analysys-of-transit-data",
    "href": "mp01.html#initial-analysys-of-transit-data",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Initial analysys of transit data",
    "text": "Initial analysys of transit data\nIn this part, I conducted the initial analysis of transit data by addressing 5 questions provided in Task 3.\n\nQ1. What transit agency had the most total VRM in this dataset?\nNot surprisingly, MTA New York City Transit has the largest total mileage in this dataset. Its total of 10.8B+ trips is almost double of the amount attributed to New Jersey Transit Corporation, the agency with the second largest result.\n\n\n\n\n\n\n\n\nTop 3 Transit Agencies by Total VRM\n\n\nAgency\nTOTAL_VRM\n\n\n\n\nMTA New York City Transit\n10,832,855,350\n\n\nNew Jersey Transit Corporation\n5,645,525,525\n\n\nLos Angeles County Metropolitan Transportation Authority\n4,354,016,659\n\n\n\n\n\n\n\n\n# installing and loading additional libraries\n\nif (!require(\"formattable\")) install.packages(\"formattable\")\nlibrary(formattable)\nif (!require(\"gt\")) install.packages(\"gt\")\nlibrary(gt)\n\nUSAGE |&gt;\n  group_by(Agency) |&gt;\n  summarize(TOTAL_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n  mutate(TOTAL_VRM = comma(TOTAL_VRM, digits = 0)) |&gt;\n  slice_max(TOTAL_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Agencies by Total VRM\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Agencies by Total VRM\n\n\nAgency\nTOTAL_VRM\n\n\n\n\nMTA New York City Transit\n10,832,855,350\n\n\nNew Jersey Transit Corporation\n5,645,525,525\n\n\nLos Angeles County Metropolitan Transportation Authority\n4,354,016,659\n\n\n\n\n\n\n\n\n\nQ2. What transit mode had the most total VRM in this dataset?\nWith over 49 billion miles, bus has the most total VRM in this dataset.\n\nUSAGE |&gt;\n  group_by(Mode) |&gt;\n  summarize(TOTAL_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n  mutate(TOTAL_VRM = comma(TOTAL_VRM, digits = 0)) |&gt;\n  slice_max(TOTAL_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Modes by Total VRM\"\n  )\n\n\n\n\n\n\n\nTop 3 Transit Modes by Total VRM\n\n\nMode\nTOTAL_VRM\n\n\n\n\nBus\n49,444,494,088\n\n\nDemand Response\n17,955,073,508\n\n\nHeavy Rail\n14,620,362,107\n\n\n\n\n\n\n\n\n\nQ3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\nThere were slightly over 180 million trips recorded on NYC Subway in May 2024.\n\nUSAGE |&gt;\n  dplyr::filter(\n    Mode == \"Heavy Rail\",\n    Agency == \"MTA New York City Transit\",\n    Month == \"2024-05-01\"\n  ) |&gt;\n  summarize(TOTAL_TRIPS = sum(UPT, na.rm = TRUE)) |&gt;\n  mutate(TOTAL_TRIPS = comma(TOTAL_TRIPS, digits = 0)) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"NYC Subway Trips in May'24\"\n  )\n\n\n\n\n\n\n\nNYC Subway Trips in May'24\n\n\nTOTAL_TRIPS\n\n\n\n\n180,458,819\n\n\n\n\n\n\n\n\n\nQ5. How much did NYC subway ridership fall between April 2019 and April 2020?\nNYC subway ridership fell by 91% between April 2019 and April 2020 because of Covid pandemic.\n\nUSAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\" & Mode == \"Heavy Rail\") |&gt;\n  summarise(\n    APR19_TRIPS = sum(dplyr::case_when(Month == \"2019-04-01\" ~ UPT, TRUE ~ 0), na.rm = TRUE),\n    APR20_TRIPS = sum(dplyr::case_when(Month == \"2020-04-01\" ~ UPT, TRUE ~ 0), na.rm = TRUE),\n    PCT_CHANGE = (APR20_TRIPS - APR19_TRIPS) / APR19_TRIPS\n  ) |&gt;\n  mutate(\n    PCT_CHANGE = scales::percent(PCT_CHANGE),\n    APR19_TRIPS = comma(APR19_TRIPS, digits = 0),\n    APR20_TRIPS = comma(APR20_TRIPS, digits = 0)\n  ) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Change in NYC Subway Ridership\"\n  )\n\n\n\n\n\n\n\nChange in NYC Subway Ridership\n\n\nAPR19_TRIPS\nAPR20_TRIPS\nPCT_CHANGE\n\n\n\n\n232,223,929\n20,254,269\n-91%"
  },
  {
    "objectID": "mp01.html#initial-analysis-of-transit-data",
    "href": "mp01.html#initial-analysis-of-transit-data",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Initial analysis of transit data",
    "text": "Initial analysis of transit data\nIn this part, I conducted the initial analysis of transit data by addressing the questions provided in Task 3.\n\nQ1. What transit agency had the most total VRM in this dataset?\nNot surprisingly, MTA New York City Transit has the largest total mileage in this dataset. Its total of 10.8B+ vehicle revenue miles is almost double of the amount attributed to New Jersey Transit Corporation, the agency with the second largest result.\n\n\n\n\n\n\n\n\nTop 3 Transit Agencies by Total VRM\n\n\nAgency\nTotal_VRM\n\n\n\n\nMTA New York City Transit\n10,832,855,350\n\n\nNew Jersey Transit Corporation\n5,645,525,525\n\n\nLos Angeles County Metropolitan Transportation Authority\n4,354,016,659\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\n# installing and loading additional libraries\n\nif (!require(\"formattable\")) install.packages(\"formattable\")\nlibrary(formattable)\nif (!require(\"gt\")) install.packages(\"gt\")\nlibrary(gt)\n\nUSAGE |&gt;\n  group_by(Agency) |&gt;\n  summarize(Total_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n  mutate(Total_VRM = comma(Total_VRM, digits = 0)) |&gt;\n  slice_max(Total_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Agencies by Total VRM\"\n  )\n\n\n\nQ2. What transit mode had the most total VRM in this dataset?\nWith over 49 billion vehicle revenue miles, bus has the most total VRM of all transit modes.\n\n\n\n\n\n\n\n\nTop 3 Transit Modes by Total VRM\n\n\nMode\nTotal_VRM\n\n\n\n\nBus\n49,444,494,088\n\n\nDemand Response\n17,955,073,508\n\n\nHeavy Rail\n14,620,362,107\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE |&gt;\n  group_by(Mode) |&gt;\n  summarize(Total_VRM = sum(VRM, na.rm = TRUE)) |&gt;\n  mutate(Total_VRM = comma(Total_VRM, digits = 0)) |&gt;\n  slice_max(Total_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Modes by Total VRM\"\n  )\n\n\n\nQ3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\nThere were slightly over 180 million trips recorded on NYC Subway in May 2024.\n\n\n\n\n\n\n\n\nNYC Subway Trips in May'24\n\n\nTotal_UPT\n\n\n\n\n180,458,819\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE |&gt;\n  dplyr::filter(\n    Mode == \"Heavy Rail\",\n    Agency == \"MTA New York City Transit\",\n    Month == \"2024-05-01\"\n  ) |&gt;\n  summarize(Total_UPT = sum(UPT, na.rm = TRUE)) |&gt;\n  mutate(Total_UPT = comma(Total_UPT, digits = 0)) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"NYC Subway Trips in May'24\"\n  )\n\n\n\nQ5. How much did NYC subway ridership fall between April’19 and April’20?\nNYC subway ridership fell by 91% between April 2019 and April 2020 because of the Covid’19 pandemic.\n\n\n\n\n\n\n\n\nChange in NYC Subway Ridership\n\n\nApril19_Trips\nApril20_Trips\nPct_Change\n\n\n\n\n232,223,929\n20,254,269\n-91%\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE |&gt;\n  filter(Agency == \"MTA New York City Transit\" & Mode == \"Heavy Rail\") |&gt;\n  summarise(\n    April19_Trips = sum(dplyr::case_when(Month == \"2019-04-01\" ~ UPT, TRUE ~ 0), na.rm = TRUE),\n    April20_Trips = sum(dplyr::case_when(Month == \"2020-04-01\" ~ UPT, TRUE ~ 0), na.rm = TRUE),\n    Pct_Change = (April20_Trips - April19_Trips) / April19_Trips\n  ) |&gt;\n  mutate(\n    Pct_Change = scales::percent(Pct_Change),\n    April19_Trips = comma(April19_Trips, digits = 0),\n    April20_Trips = comma(April20_Trips, digits = 0)\n  ) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Change in NYC Subway Ridership\"\n  )"
  },
  {
    "objectID": "mp01.html#task-4---additional-analysis-of-transit-data",
    "href": "mp01.html#task-4---additional-analysis-of-transit-data",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Task 4 - Additional analysis of transit data",
    "text": "Task 4 - Additional analysis of transit data\nIn this part, I took a deeper look at the NYC transit system data and discovered the following:\n1) Based on the share of UPT, subway has been, by far, the most popular mode of transportation. In any given year, its relative share of UPT is at least 2X of the second most used transit mode.\n2) Moreover, based on the changes in the share of UPT, NYC subway usage has been slowly increasing over the years. Between 2002 and 2023, it gained 9 percentage points in relative share, going from 68.1% of total to 76.6% of total, respectively.\n3) At the same time, there has been a corresponding decrease in Bus trips. Between 2002 and 2023, it lost 10 percentage points in relative share, going from 31.9% of total to 21.6% of total, respectively.\n4) Bus Rapid Transit and Commuter Bus are newer modes of transportation, with data on their usage not available until 2012.\n\n\n\n\n\n\n\n\nNYC Transit System - Relative Shares of UPT by Transportation Mode\n\n\nYEAR\nBus\nDemand Response\nHeavy Rail\nBus Rapid Transit\nCommuter Bus\n\n\n\n\n2002\n31.9%\n0.0%\n68.1%\nNA\nNA\n\n\n2003\n31.0%\n0.0%\n69.0%\nNA\nNA\n\n\n2004\n29.0%\n0.1%\n71.0%\nNA\nNA\n\n\n2005\n30.4%\n0.1%\n69.5%\nNA\nNA\n\n\n2006\n29.0%\n0.1%\n70.9%\nNA\nNA\n\n\n2007\n26.5%\n0.1%\n73.4%\nNA\nNA\n\n\n2008\n26.2%\n0.2%\n73.7%\nNA\nNA\n\n\n2009\n26.3%\n0.2%\n73.5%\nNA\nNA\n\n\n2010\n25.2%\n0.2%\n74.6%\nNA\nNA\n\n\n2011\n24.1%\n0.1%\n75.7%\nNA\nNA\n\n\n2012\n22.5%\n0.1%\n76.0%\n0.9%\n0.4%\n\n\n2013\n22.2%\n0.2%\n76.7%\n0.6%\n0.4%\n\n\n2014\n21.4%\n0.2%\n77.5%\n0.6%\n0.4%\n\n\n2015\n21.6%\n0.2%\n77.3%\n0.6%\n0.4%\n\n\n2016\n21.4%\n0.2%\n77.2%\n0.8%\n0.4%\n\n\n2017\n20.1%\n0.2%\n78.5%\n0.9%\n0.4%\n\n\n2018\n20.5%\n0.2%\n78.0%\n0.9%\n0.4%\n\n\n2019\n20.0%\n0.1%\n78.7%\n0.9%\n0.3%\n\n\n2020\n26.2%\n0.2%\n72.2%\n1.1%\n0.3%\n\n\n2021\n22.7%\n0.1%\n75.9%\n0.9%\n0.3%\n\n\n2022\n20.1%\n0.1%\n78.7%\n0.7%\n0.4%\n\n\n2023\n21.6%\n0.1%\n76.8%\n1.2%\n0.3%\n\n\n2024\n23.0%\n0.1%\n75.2%\n1.4%\n0.4%\n\n\n\n\n\n\n\nPlease see below for the code used to generate aforementioned results:\n\n# create df with annual totals\n\nnyc_annual_df &lt;- USAGE |&gt;\n  mutate(YEAR = format(as.Date(Month), \"%Y\")) |&gt;\n  dplyr::filter(Agency == \"MTA New York City Transit\") |&gt;\n  group_by(YEAR) |&gt;\n  summarize(TOTAL_TRIPS_ALL = sum(UPT, na.rm = TRUE)) |&gt;\n  ungroup()\n\n# create df with annual totals by mode\n\nnyc_mode_df &lt;- USAGE |&gt;\n  mutate(YEAR = format(as.Date(Month), \"%Y\")) |&gt;\n  dplyr::filter(Agency == \"MTA New York City Transit\") |&gt;\n  group_by(YEAR, Mode) |&gt;\n  summarize(TOTAL_TRIPS = sum(UPT, na.rm = TRUE)) |&gt;\n  ungroup()\n\n# join 2 dfs and calculate shares by mode\n\nnyc_joined_df &lt;- nyc_mode_df |&gt;\n  left_join(nyc_annual_df, by = \"YEAR\")\n\nnyc_joined_df2 &lt;- nyc_joined_df |&gt;\n  mutate(SHARE = TOTAL_TRIPS / TOTAL_TRIPS_ALL) |&gt;\n  mutate(SHARE = scales::percent(SHARE, accuracy = 0.1)) |&gt;\n  select(-TOTAL_TRIPS, -TOTAL_TRIPS_ALL)\n\n# pivot wide\n\nnyc_mode_df_pivoted &lt;- pivot_wider(nyc_joined_df2,\n  id_cols = YEAR,\n  names_from = Mode,\n  values_from = SHARE\n)\n\nnyc_mode_df_pivoted |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"NYC Transit System - Relative Shares of UPT by Transportation Mode\"\n  )"
  },
  {
    "objectID": "mp01.html#financial-data-prepation",
    "href": "mp01.html#financial-data-prepation",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Financial data prepation",
    "text": "Financial data prepation\nIn this part, I created a summary usage table for 2022 and joined it with available financial data (per Task 5). The resulting dataset is provided for review after the code block.\n\n# code used to generate financial and usage summary table for 2022\n\n# create 2022 usage data\n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  select(\n    `NTD ID`,\n    Agency,\n    Metro_Area,\n    Mode,\n    UPT,\n    VRM,\n    Month\n  ) |&gt;\n  filter(year(Month) == \"2022\") |&gt;\n  group_by(\n    `NTD ID`,\n    Agency,\n    Metro_Area,\n    Mode\n  ) |&gt;\n  summarise(\n    Total_VRM = sum(VRM, na.rm = TRUE),\n    Total_UPT = sum(UPT, na.rm = TRUE)\n  ) |&gt;\n  ungroup()\n\n# recode modes values in financial data\n\nFINANCIALS2 &lt;- FINANCIALS |&gt;\n  mutate(Mode = case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"\n  ))\n\n#join financial and usage data\n\nUSAGE_AND_FINANCIALS &lt;- left_join(\n  USAGE_2022_ANNUAL,\n  FINANCIALS2,\n  join_by(`NTD ID`, Mode)\n) |&gt;\n  drop_na()\n\n#review the data\n\nsample_n(USAGE_AND_FINANCIALS, 1132) |&gt;\n  DT::datatable()"
  },
  {
    "objectID": "mp01.html#analysis-of-2022-financial-and-usage-data",
    "href": "mp01.html#analysis-of-2022-financial-and-usage-data",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Analysis of 2022 financial and usage data",
    "text": "Analysis of 2022 financial and usage data\nIn this part, I addressed the questions outlined in Task 6. Please note that this analysis will be limited to large transit systems only (large transit systems are defined as systems with at least 400,000 total annual UPT).\n\nQ1. Which transit system (agency and mode) had the most UPT in 2022?\nNot surprisingly, NYC Subway had the largest volume of trips in 2022.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by UPT\n\n\n2022\n\n\nTransit_System\nUPT\n\n\n\n\nMTA New York City Transit_Heavy Rail\n1,793,073,801\n\n\nMTA New York City Transit_Bus\n458,602,305\n\n\nLos Angeles County Metropolitan Transportation Authority_Bus\n193,637,448\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(Transit_System, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(Transit_System) |&gt;\n  filter(sum(Total_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(UPT = sum(Total_UPT)) |&gt;\n  mutate(UPT = comma(UPT, digits = 0)) |&gt;\n  slice_max(UPT, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by UPT\",\n    subtitle = \"2022\"\n  )\n\n\n\nQ2.Which transit system (agency and mode) had the highest farebox recovery, defined as the highest ratio of Total Fares to Expenses?\nIn 2022, ferryboat managed by Port Imperial Ferry Corp. had the highest farebox recovery ratio of 1.43.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Farebox Recovery\n\n\n2022\n\n\nTransit_System\nFarebox_Recovery\n\n\n\n\nPort Imperial Ferry Corporation_Ferryboat\n1.43\n\n\nHyannis Harbor Tours, Inc._Ferryboat\n1.41\n\n\nTrans-Bridge Lines, Inc._Commuter Bus\n1.33\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(Transit_System, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(Transit_System) |&gt;\n  filter(sum(Total_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(Farebox_Recovery = sum(`Total Fares`, na.rm = TRUE) / sum(Expenses, na.rm = TRUE)) |&gt;\n  mutate(Farebox_Recovery = comma(Farebox_Recovery, digits=2)) |&gt;\n  ungroup() |&gt;\n  slice_max(Farebox_Recovery, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Farebox Recovery\",\n    subtitle = \"2022\"\n  )\n\n\n\nQ3.Which transit system (agency and mode) has the lowest expenses per UPT?\nIn 2022, North Carolina State University Bus had the lowest expenses per UPT of $1.18 per unlinked passenger trip.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Expenses per UPT\n\n\n2022\n\n\nTransit_System\nExpenses_PER_UPT\n\n\n\n\nNorth Carolina State University_Bus\n$1.18\n\n\nAnaheim Transportation Network_Bus\n$1.28\n\n\nUniversity of Iowa_Bus\n$1.54\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(Transit_System, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(Transit_System) |&gt;\n  filter(sum(Total_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(Expenses_PER_UPT = sum(Expenses, na.rm = TRUE) / sum(Total_UPT, na.rm = TRUE)) |&gt;\n  mutate(Expenses_PER_UPT = scales::dollar(Expenses_PER_UPT)) |&gt;\n  ungroup() |&gt;\n  slice_min(Expenses_PER_UPT, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Expenses per UPT\",\n    subtitle = \"2022\"\n  )\n\n\n\nQ4.Which transit system (agency and mode) has the highest total fares per UPT?\nIn 2022, ferryboat managed by Cape May Lewes Ferry garnered the highest total fares per UPT of $9.23 per unlinked passenger trip.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Fares per UPT\n\n\n2022\n\n\nTransit_System\nFares_per_UPT\n\n\n\n\nCape May Lewes Ferry_Ferryboat\n$9.23\n\n\nVirginia Railway Express_Commuter Rail\n$9.01\n\n\nPort Imperial Ferry Corporation_Ferryboat\n$8.90\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(Transit_System, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(Transit_System) |&gt;\n  filter(sum(Total_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(Fares_per_UPT = sum(`Total Fares`, na.rm = TRUE) / sum(Total_UPT, na.rm = TRUE)) |&gt;\n  mutate(Fares_per_UPT = scales::dollar(Fares_per_UPT)) |&gt;\n  ungroup() |&gt;\n  slice_max(Fares_per_UPT, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Fares per UPT\",\n    subtitle = \"2022\"\n  )\n\n\n\nQ5.Which transit system (agency and mode) has the lowest expenses per VRM?\nIn 2022, Vanpool managed by Metropolitan Transportation Commission achieved the lowest expenses per VRM of $0.44 per vehicle revenue mile.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Expenses per VRM\n\n\n2022\n\n\nTransit_System\nExpenses_per_VRM\n\n\n\n\nMetropolitan Transportation Commission_Vanpool\n$0.44\n\n\nSan Joaquin Council_Vanpool\n$0.50\n\n\nSan Diego Association of Governments_Vanpool\n$0.54\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(Transit_System, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(Transit_System) |&gt;\n  filter(sum(Total_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(Expenses_per_VRM = sum(Expenses, na.rm = TRUE) / sum(Total_VRM, na.rm = TRUE)) |&gt;\n  mutate(Expenses_per_VRM = scales::dollar(Expenses_per_VRM)) |&gt;\n  ungroup() |&gt;\n  slice_min(Expenses_per_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Expenses per VRM\",\n    subtitle = \"2022\"\n  )\n\n\n\nQ6.Which transit system (agency and mode) has the highest total fares per VRM?\nIn 2022, ferryboat managed by Cape May Lewes Ferry achieved higher fares per VRM than any other large transit system with UPT of at least 400,000.\n\n\n\n\n\n\n\n\nTop 3 Transit Systems by Fares per VRM\n\n\n2022\n\n\nTransit_System\nFares_per_VRM\n\n\n\n\nCape May Lewes Ferry_Ferryboat\n$93.01\n\n\nWoods Hole, Martha's Vineyard and Nantucket Steamship Authority_Ferryboat\n$91.68\n\n\nAnaheim Transportation Network_Bus\n$9.42\n\n\n\n\n\n\n\nPlease see below for the code used to generate the aforementioned results:\n\nUSAGE_AND_FINANCIALS |&gt;\n  unite(Transit_System, c(\"Agency\", \"Mode\")) |&gt;\n  group_by(Transit_System) |&gt;\n  filter(sum(Total_UPT, na.rm = TRUE) &gt;= 400000) |&gt;\n  summarise(Fares_per_VRM = sum(`Total Fares`, na.rm = TRUE) / sum(Total_VRM, na.rm = TRUE)) |&gt;\n  mutate(Fares_per_VRM = scales::dollar(Fares_per_VRM)) |&gt;\n  ungroup() |&gt;\n  slice_max(Fares_per_VRM, n = 3) |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"Top 3 Transit Systems by Fares per VRM\",\n    subtitle = \"2022\"\n  )\n\n\n\nConclusion\nThe farebox recovery ratio is one of the key metrics used to evaluate financial performance of transit systems (Source). With the farebox recovery ratio of 1.43, the ferryboat managed by Port Imperial Ferry Corporation appeared to be the most efficient large transit system in 2022."
  },
  {
    "objectID": "mp01.html#additional-analysis-of-transit-data",
    "href": "mp01.html#additional-analysis-of-transit-data",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Additional Analysis of Transit Data",
    "text": "Additional Analysis of Transit Data\nIn this part, I conducted additional analysis of transit usage data as instructed in Task 4. Focusing on MTA New York City Transit, I analyzed the relative popularity of different transporation options over the years and discovered the following:\n1) Based on the share of UPT, subway has been, by far, the most popular mode of transportation. In any given year, its relative share of UPT is at least 2X of the second most used transit mode share.\n2) Moreover, based on the changes in the share of UPT, NYC subway usage has been slowly increasing over the years. Between 2002 and 2023, it gained 9 percentage points in relative share, going from 68.1% of total to 76.8% of total, respectively.\n3) At the same time, there has been a corresponding decrease in Bus trips. Between 2002 and 2023, it lost 10 percentage points in relative share, going from 31.9% of total to 21.6% of total, respectively.\n4) Bus Rapid Transit and Commuter Bus are newer modes of transportation, with data on their usage not available until 2012.\n\n\n\n\n\n\n\n\nNYC Transit System - Relative Shares of UPT by Transportation Mode\n\n\nYEAR\nBus\nDemand Response\nHeavy Rail\nBus Rapid Transit\nCommuter Bus\n\n\n\n\n2002\n31.9%\n0.0%\n68.1%\nNA\nNA\n\n\n2003\n31.0%\n0.0%\n69.0%\nNA\nNA\n\n\n2004\n29.0%\n0.1%\n71.0%\nNA\nNA\n\n\n2005\n30.4%\n0.1%\n69.5%\nNA\nNA\n\n\n2006\n29.0%\n0.1%\n70.9%\nNA\nNA\n\n\n2007\n26.5%\n0.1%\n73.4%\nNA\nNA\n\n\n2008\n26.2%\n0.2%\n73.7%\nNA\nNA\n\n\n2009\n26.3%\n0.2%\n73.5%\nNA\nNA\n\n\n2010\n25.2%\n0.2%\n74.6%\nNA\nNA\n\n\n2011\n24.1%\n0.1%\n75.7%\nNA\nNA\n\n\n2012\n22.5%\n0.1%\n76.0%\n0.9%\n0.4%\n\n\n2013\n22.2%\n0.2%\n76.7%\n0.6%\n0.4%\n\n\n2014\n21.4%\n0.2%\n77.5%\n0.6%\n0.4%\n\n\n2015\n21.6%\n0.2%\n77.3%\n0.6%\n0.4%\n\n\n2016\n21.4%\n0.2%\n77.2%\n0.8%\n0.4%\n\n\n2017\n20.1%\n0.2%\n78.5%\n0.9%\n0.4%\n\n\n2018\n20.5%\n0.2%\n78.0%\n0.9%\n0.4%\n\n\n2019\n20.0%\n0.1%\n78.7%\n0.9%\n0.3%\n\n\n2020\n26.2%\n0.2%\n72.2%\n1.1%\n0.3%\n\n\n2021\n22.7%\n0.1%\n75.9%\n0.9%\n0.3%\n\n\n2022\n20.1%\n0.1%\n78.7%\n0.7%\n0.4%\n\n\n2023\n21.6%\n0.1%\n76.8%\n1.2%\n0.3%\n\n\n2024\n23.0%\n0.1%\n75.2%\n1.4%\n0.4%\n\n\n\n\n\n\n\n(Relative share of UPT is calculated as UPT of a given mode over total annual UPT)\nPlease see below for the code used to generate aforementioned results:\n\n# create df with annual totals\n\nnyc_annual_df &lt;- USAGE |&gt;\n  mutate(YEAR = format(as.Date(Month), \"%Y\")) |&gt;\n  dplyr::filter(Agency == \"MTA New York City Transit\") |&gt;\n  group_by(YEAR) |&gt;\n  summarize(TOTAL_TRIPS_ALL = sum(UPT, na.rm = TRUE)) |&gt;\n  ungroup()\n\n# create df with annual totals by mode\n\nnyc_mode_df &lt;- USAGE |&gt;\n  mutate(YEAR = format(as.Date(Month), \"%Y\")) |&gt;\n  dplyr::filter(Agency == \"MTA New York City Transit\") |&gt;\n  group_by(YEAR, Mode) |&gt;\n  summarize(TOTAL_TRIPS = sum(UPT, na.rm = TRUE)) |&gt;\n  ungroup()\n\n# join 2 dfs and calculate shares by mode\n\nnyc_joined_df &lt;- nyc_mode_df |&gt;\n  left_join(nyc_annual_df, by = \"YEAR\")\n\nnyc_joined_df2 &lt;- nyc_joined_df |&gt;\n  mutate(SHARE = TOTAL_TRIPS / TOTAL_TRIPS_ALL) |&gt;\n  mutate(SHARE = scales::percent(SHARE, accuracy = 0.1)) |&gt;\n  select(-TOTAL_TRIPS, -TOTAL_TRIPS_ALL)\n\n# pivot wide\n\nnyc_mode_df_pivoted &lt;- pivot_wider(nyc_joined_df2,\n  id_cols = YEAR,\n  names_from = Mode,\n  values_from = SHARE\n)\n\nnyc_mode_df_pivoted |&gt;\n  gt() |&gt;\n  tab_header(\n    title = \"NYC Transit System - Relative Shares of UPT by Transportation Mode\"\n  )"
  },
  {
    "objectID": "mp01.html#initial-data-preparation",
    "href": "mp01.html#initial-data-preparation",
    "title": "Mini-Project 01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "Initial data preparation",
    "text": "Initial data preparation\nIn this part, I created the base table for data analysis using the code provided in the assignment. I also modified column naming convention (as instructed in Task 1) and recoded the values in the ‘Mode’ column to make them easier to understand and use for analysis (as instructed in Task 2). The base table is provided for review after the code block (please note NTD ID and 3 Modes columns are excluded from the preview).\n\n# Installing and loading libraries\n\nif (!require(\"tidyverse\")) install.packages(\"tidyverse\")\nlibrary(tidyverse)\nif (!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nlibrary(dplyr)\n\n# Let's start with Fare Revenue\n\nFARES &lt;- readxl::read_xlsx(\"2022_fare_revenue.xlsx\") |&gt;\n  select(\n    -`State/Parent NTD ID`,\n    -`Reporter Type`,\n    -`Reporting Module`,\n    -`TOS`,\n    -`Passenger Paid Fares`,\n    -`Organization Paid Fares`\n  ) |&gt;\n  filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n  select(-`Expense Type`) |&gt;\n  group_by(\n    `NTD ID`, # Sum over different `TOS` for the same `Mode`\n    `Agency Name`, # These are direct operated and sub-contracted\n    `Mode`\n  ) |&gt; # of the same transit modality\n  # Not a big effect in most munis (significant DO\n  # tends to get rid of sub-contractors), but we'll sum\n  # to unify different passenger experiences\n  summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n  ungroup()\n\n# Next, expenses\n\nEXPENSES &lt;- readr::read_csv(\"2022_expenses.csv\") |&gt;\n  select(\n    `NTD ID`,\n    `Agency`,\n    `Total`,\n    `Mode`\n  ) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n  rename(Expenses = Total) |&gt;\n  group_by(`NTD ID`, `Mode`) |&gt;\n  summarize(Expenses = sum(Expenses)) |&gt;\n  ungroup()\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\n# Monthly Transit Numbers\n\nTRIPS &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"UPT\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(\n    -`Legacy NTD ID`,\n    -`Reporter Type`,\n    -`Mode/Type of Service Status`,\n    -`UACE CD`,\n    -`TOS`\n  ) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`),\n    names_to = \"Month\",\n    values_to = \"UPT\"\n  ) |&gt;\n  drop_na() |&gt;\n  mutate(Month = my(Month)) # Parse _m_onth _y_ear date specs\n\nMILES &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet = \"VRM\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(\n    -`Legacy NTD ID`,\n    -`Reporter Type`,\n    -`Mode/Type of Service Status`,\n    -`UACE CD`,\n    -`TOS`\n  ) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`),\n    names_to = \"Month\",\n    values_to = \"VRM\"\n  ) |&gt;\n  drop_na() |&gt;\n  group_by(\n    `NTD ID`, `Agency`, `UZA Name`,\n    `Mode`, `3 Mode`, Month\n  ) |&gt;\n  summarize(VRM = sum(VRM)) |&gt;\n  ungroup() |&gt;\n  mutate(Month = my(Month)) # Parse _m_onth _y_ear date specs\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`))\n\n## Task 1 - Creating syntatic names\n\nnames(USAGE)[3] &lt;- \"Metro_Area\"\n\n## Task 2 - Recoding the Mode column\n\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode = case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\",\n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramway\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"\n  ))\n\n# base table sampled\n\nsample_n(USAGE, 1000) |&gt;\n  select(-`NTD ID`, -`3 Mode`) |&gt;\n  mutate(Month = as.character(Month)) |&gt;\n  DT::datatable()"
  }
]