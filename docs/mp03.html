<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Mini-Project 03: Do Proportional Electoral College Allocations Yield a More Representative Presidency? – STA 9750 2024 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">

<script src="site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>

<link href="site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">

<script src="site_libs/selectize-0.12.0/selectize.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>

<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 2024 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Mini-Project 03: Do Proportional Electoral College Allocations Yield a More Representative Presidency?</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this mini-project, we will investigate the claim that the US Electoral College systematically biases election results away from the popular vote.</p>
<section id="data-prep" class="level4">
<h4 class="anchored" data-anchor-id="data-prep">Data Prep</h4>
<p>First, we will obtain and prepare data for analysis.<br>
<strong>Installing and Loading Libraries</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installing and loading libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"tidyverse"</span>)) <span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"DT"</span>)) <span class="fu">install.packages</span>(<span class="st">"DT"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"dplyr"</span>)) <span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"psych"</span>)) <span class="fu">install.packages</span>(<span class="st">"psych"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"gt"</span>)) <span class="fu">install.packages</span>(<span class="st">"gt"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"formattable"</span>)) <span class="fu">install.packages</span>(<span class="st">"formattable"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(formattable)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"sqldf"</span>)) <span class="fu">install.packages</span>(<span class="st">"sqldf"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sqldf)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"plotly"</span>)) <span class="fu">install.packages</span>(<span class="st">"plotly"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"ggplot2"</span>)) <span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"RColorBrewer"</span>)) <span class="fu">install.packages</span>(<span class="st">"RColorBrewer"</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"sf"</span>)) <span class="fu">install.packages</span>(<span class="st">"sf"</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-1.download-congressional-shapefiles-1976-2012" class="level4">
<h4 class="anchored" data-anchor-id="task-1.download-congressional-shapefiles-1976-2012">Task 1.Download Congressional Shapefiles 1976-2012</h4>
<blockquote class="blockquote">
<p>Download congressional shapefiles from Lewis et al.&nbsp;for all US Congresses5 from 1976 to 2012. Your download code should: 1)Be fully automated (no “hand-downloading”); 2)Download files with a systematic and interpretable naming convention 3)Only download files as needed out of courtesy for the data provider’s web sever. That is, if you already have a copy of the file, do not re-download it repeatedly.</p>
</blockquote>
<p>The code below will download files to a local folder per instructions.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">94</span><span class="sc">:</span><span class="dv">112</span>) {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  fname <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"districts"</span>, <span class="fu">formatC</span>(i, <span class="at">width =</span> <span class="dv">3</span>, <span class="at">format =</span> <span class="st">"d"</span>, <span class="at">flag =</span> <span class="st">"0"</span>), <span class="st">".zip"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(fname)) {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"https://cdmaps.polisci.ucla.edu/shp/"</span>, fname)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(url, <span class="at">destfile =</span> fname)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    zip_contents <span class="ot">&lt;-</span> <span class="fu">unzip</span>(fname, <span class="at">exdir =</span> td)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    shp_file <span class="ot">&lt;-</span> zip_contents[<span class="fu">grepl</span>(<span class="st">"shp$"</span>, zip_contents)]</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    sf_data <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(shp_file)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign</span>(<span class="fu">paste0</span>(<span class="st">"districts"</span>, <span class="fu">formatC</span>(i, <span class="at">width =</span> <span class="dv">3</span>, <span class="at">format =</span> <span class="st">"d"</span>, <span class="at">flag =</span> <span class="st">"0"</span>), <span class="st">"_sf"</span>), sf_data)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-2.download-congressional-shapefiles-2014-2022" class="level4">
<h4 class="anchored" data-anchor-id="task-2.download-congressional-shapefiles-2014-2022">Task 2.Download Congressional Shapefiles 2014-2022</h4>
<blockquote class="blockquote">
<p>Download congressional shapefiles from the US Census Bureau for all US Congresses from 2014 to 2022. Your download code should: 1)Be fully automated (no “hand-downloading”); 2)Download files with a systematic and interpretable naming convention 3)Only download files as needed out of courtesy for the data provider’s web sever. That is, if you already have a copy of the file, do not re-download it repeatedly.</p>
</blockquote>
<p>The code below will download files to a local folder per instructions.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2014</span><span class="sc">:</span><span class="dv">2022</span>) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  BASE_URL <span class="ot">&lt;-</span> <span class="st">"https://www2.census.gov/geo/tiger/"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;=</span> <span class="dv">2018</span>) {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    file <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"TIGER"</span>, <span class="fu">sprintf</span>(<span class="st">"%d"</span>, i), <span class="st">"/CD/tl_"</span>, <span class="fu">sprintf</span>(<span class="st">"%d"</span>, i), <span class="st">"_us_cd116.zip"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">2015</span>) {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    file <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"TIGER"</span>, <span class="fu">sprintf</span>(<span class="st">"%d"</span>, i), <span class="st">"/CD/tl_"</span>, <span class="fu">sprintf</span>(<span class="st">"%d"</span>, i), <span class="st">"_us_cd115.zip"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    file <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"TIGER"</span>, <span class="fu">sprintf</span>(<span class="st">"%d"</span>, i), <span class="st">"/CD/tl_"</span>, <span class="fu">sprintf</span>(<span class="st">"%d"</span>, i), <span class="st">"_us_cd114.zip"</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  download_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"TIGER"</span>, <span class="fu">sprintf</span>(<span class="st">"%d"</span>, i), <span class="st">".zip"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(download_name)) {</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    FILE_URL <span class="ot">&lt;-</span> <span class="fu">paste0</span>(BASE_URL, file)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(FILE_URL)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(FILE_URL, <span class="at">destfile =</span> download_name, <span class="at">mode =</span> <span class="st">"wb"</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-3-exploration-of-vote-count-data" class="level4">
<h4 class="anchored" data-anchor-id="task-3-exploration-of-vote-count-data">Task 3: Exploration of Vote Count Data</h4>
<blockquote class="blockquote">
<ol type="1">
<li>Q1. Which states have gained and lost the most seats in the US House of Representatives between 1976 and 2022?</li>
</ol>
</blockquote>
<p>Before we proceed to analyzing data, it’s worth noting that states lose and gain seats in the U.S. House of Representatives based on changes in their population as measured by the U.S. Census. The number of House seats is fixed at 435, so after each Census, which is conducted every ten years, seats are reapportioned among the states to reflect population shifts. The population used for this calculation includes all residents, regardless of age, citizenship, or legal status. (<a href="https://www.visitthecapitol.gov/sites/default/files/documents/resources-and-activities/CVC_HS_ActivitySheets_CongApportionment.pdf">Source</a>)</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## read in presidential elections data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>pres <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"president_1976_2020.csv"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># head(pres)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># read in house election vote data</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>house <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"house_1976_2022.csv"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># head(house)</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="do">## create a df with house results for 1976 and 2022</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>house_1976_and_2022 <span class="ot">&lt;-</span> <span class="fu">sqldf</span>(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="st">   with h76 as (</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="st">   select state,</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="st">   max(district) as num_seats</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="st">   from house</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="st">   where 1=1</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="st">   and year=1976</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="st">   group by 1</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="st">   )</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="st">   ,</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="st">   h22 as (</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="st">   select state,</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="st">   max(district) as num_seats</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="st">   from house</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="st">   where 1=1</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="st">   and year=2022</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="st">   group by 1</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="st">   )</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="st">   ,</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a><span class="st">   base as (</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="st">   select h76.state,</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="st">   h76.num_seats,</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="st">   case</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="st">   when h76.num_seats=0 then 1</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a><span class="st">   else h76.num_seats</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a><span class="st">   end as number_of_seats_1976,</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a><span class="st">   h22.num_seats,</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="st">   case</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a><span class="st">   when h22.num_seats=0 then 1</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a><span class="st">   else h22.num_seats</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="st">   end as number_of_seats_2022</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="st">   from h76</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="st">   left join h22</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="st">   on h76.state=h22.state</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="st">   )</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="st">   select state,</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="st">   number_of_seats_1976,</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="st">   number_of_seats_2022,</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a><span class="st">   number_of_seats_2022 - number_of_seats_1976 as delta</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a><span class="st">   from base</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a><span class="st">    ;</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a><span class="co"># display states with largest gains in number of house seats from 1976 to 2022</span></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>house_1976_and_2022 <span class="sc">|&gt;</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(delta, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top 5 States with Largest Gains in House Seats"</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="xxgzaidogv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xxgzaidogv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xxgzaidogv thead, #xxgzaidogv tbody, #xxgzaidogv tfoot, #xxgzaidogv tr, #xxgzaidogv td, #xxgzaidogv th {
  border-style: none;
}

#xxgzaidogv p {
  margin: 0;
  padding: 0;
}

#xxgzaidogv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xxgzaidogv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xxgzaidogv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xxgzaidogv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xxgzaidogv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xxgzaidogv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxgzaidogv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xxgzaidogv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xxgzaidogv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xxgzaidogv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xxgzaidogv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xxgzaidogv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xxgzaidogv .gt_spanner_row {
  border-bottom-style: hidden;
}

#xxgzaidogv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xxgzaidogv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xxgzaidogv .gt_from_md > :first-child {
  margin-top: 0;
}

#xxgzaidogv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xxgzaidogv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xxgzaidogv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xxgzaidogv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xxgzaidogv .gt_row_group_first td {
  border-top-width: 2px;
}

#xxgzaidogv .gt_row_group_first th {
  border-top-width: 2px;
}

#xxgzaidogv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxgzaidogv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xxgzaidogv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xxgzaidogv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxgzaidogv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxgzaidogv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xxgzaidogv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xxgzaidogv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xxgzaidogv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxgzaidogv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xxgzaidogv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxgzaidogv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xxgzaidogv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxgzaidogv .gt_left {
  text-align: left;
}

#xxgzaidogv .gt_center {
  text-align: center;
}

#xxgzaidogv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xxgzaidogv .gt_font_normal {
  font-weight: normal;
}

#xxgzaidogv .gt_font_bold {
  font-weight: bold;
}

#xxgzaidogv .gt_font_italic {
  font-style: italic;
}

#xxgzaidogv .gt_super {
  font-size: 65%;
}

#xxgzaidogv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xxgzaidogv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xxgzaidogv .gt_indent_1 {
  text-indent: 5px;
}

#xxgzaidogv .gt_indent_2 {
  text-indent: 10px;
}

#xxgzaidogv .gt_indent_3 {
  text-indent: 15px;
}

#xxgzaidogv .gt_indent_4 {
  text-indent: 20px;
}

#xxgzaidogv .gt_indent_5 {
  text-indent: 25px;
}

#xxgzaidogv .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xxgzaidogv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">Top 5 States with Largest Gains in House Seats</th>
</tr>
<tr class="odd gt_col_headings">
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">state</th>
<th id="number_of_seats_1976" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">number_of_seats_1976</th>
<th id="number_of_seats_2022" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">number_of_seats_2022</th>
<th id="delta" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">delta</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="state">TEXAS</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">24</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">38</td>
<td class="gt_row gt_right" headers="delta">14</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">FLORIDA</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">15</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">28</td>
<td class="gt_row gt_right" headers="delta">13</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">CALIFORNIA</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">43</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">52</td>
<td class="gt_row gt_right" headers="delta">9</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">ARIZONA</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">4</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">9</td>
<td class="gt_row gt_right" headers="delta">5</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">GEORGIA</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">10</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">14</td>
<td class="gt_row gt_right" headers="delta">4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Texas, Florida, California, Arizona and Georgia had largest gains in house seats between 1976 and 2022.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># display states with largest losses in number of house seats from 1976 to 2022</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>house_1976_and_2022 <span class="sc">|&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(delta, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Top 5 States with Largest Losses in House Seats"</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="nlelmdzyra" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nlelmdzyra table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nlelmdzyra thead, #nlelmdzyra tbody, #nlelmdzyra tfoot, #nlelmdzyra tr, #nlelmdzyra td, #nlelmdzyra th {
  border-style: none;
}

#nlelmdzyra p {
  margin: 0;
  padding: 0;
}

#nlelmdzyra .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nlelmdzyra .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nlelmdzyra .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nlelmdzyra .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nlelmdzyra .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nlelmdzyra .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nlelmdzyra .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nlelmdzyra .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nlelmdzyra .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nlelmdzyra .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nlelmdzyra .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nlelmdzyra .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nlelmdzyra .gt_spanner_row {
  border-bottom-style: hidden;
}

#nlelmdzyra .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nlelmdzyra .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nlelmdzyra .gt_from_md > :first-child {
  margin-top: 0;
}

#nlelmdzyra .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nlelmdzyra .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nlelmdzyra .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nlelmdzyra .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nlelmdzyra .gt_row_group_first td {
  border-top-width: 2px;
}

#nlelmdzyra .gt_row_group_first th {
  border-top-width: 2px;
}

#nlelmdzyra .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlelmdzyra .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nlelmdzyra .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nlelmdzyra .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nlelmdzyra .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlelmdzyra .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nlelmdzyra .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nlelmdzyra .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nlelmdzyra .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nlelmdzyra .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nlelmdzyra .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlelmdzyra .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nlelmdzyra .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nlelmdzyra .gt_left {
  text-align: left;
}

#nlelmdzyra .gt_center {
  text-align: center;
}

#nlelmdzyra .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nlelmdzyra .gt_font_normal {
  font-weight: normal;
}

#nlelmdzyra .gt_font_bold {
  font-weight: bold;
}

#nlelmdzyra .gt_font_italic {
  font-style: italic;
}

#nlelmdzyra .gt_super {
  font-size: 65%;
}

#nlelmdzyra .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nlelmdzyra .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nlelmdzyra .gt_indent_1 {
  text-indent: 5px;
}

#nlelmdzyra .gt_indent_2 {
  text-indent: 10px;
}

#nlelmdzyra .gt_indent_3 {
  text-indent: 15px;
}

#nlelmdzyra .gt_indent_4 {
  text-indent: 20px;
}

#nlelmdzyra .gt_indent_5 {
  text-indent: 25px;
}

#nlelmdzyra .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nlelmdzyra div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">Top 5 States with Largest Losses in House Seats</th>
</tr>
<tr class="odd gt_col_headings">
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">state</th>
<th id="number_of_seats_1976" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">number_of_seats_1976</th>
<th id="number_of_seats_2022" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">number_of_seats_2022</th>
<th id="delta" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">delta</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">39</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">26</td>
<td class="gt_row gt_right" headers="delta">-13</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">OHIO</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">23</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">15</td>
<td class="gt_row gt_right" headers="delta">-8</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">PENNSYLVANIA</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">25</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">17</td>
<td class="gt_row gt_right" headers="delta">-8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">ILLINOIS</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">24</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">17</td>
<td class="gt_row gt_right" headers="delta">-7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">MICHIGAN</td>
<td class="gt_row gt_right" headers="number_of_seats_1976">19</td>
<td class="gt_row gt_right" headers="number_of_seats_2022">13</td>
<td class="gt_row gt_right" headers="delta">-6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>New York, Ohio, Pennsylvania, Illinois and Michigan had largest losses in house seats between 1976 and 2022.</p>
<blockquote class="blockquote">
<p>Q2. New York State has a unique “fusion” voting system where one candidate can appear on multiple “lines” on the ballot and their vote counts are totaled. For instance, in 2022, Jerrold Nadler appeared on both the Democrat and Working Families party lines for NYS’ 12th Congressional District. He received 200,890 votes total (184,872 as a Democrat and 16,018 as WFP), easily defeating Michael Zumbluskas, who received 44,173 votes across three party lines (Republican, Conservative, and Parent). Are there any elections in our data where the election would have had a different outcome if the “fusion” system was not used and candidates only received the votes their received from their “major party line” (Democrat or Republican) and not their total number of votes across all lines?</p>
</blockquote>
<p>To answer this question, first we are going to find states, years, and districts where fusion system was used in elections. We can do that by identifying instances where candidates received votes from multiple parties. Then we will recalculate the results of these elections by excluding votes from candidates non-primary parties. Lastly, we will compare historic performance to results in our “what-if” scenario and determine whether winners get to keep their win. Here’s a list of all elections where results would have been different in the absence of fusion system:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get a count of political parties candidates received votes from</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>house_temp1 <span class="ot">&lt;-</span> house <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year, district, candidate) <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">distinct_party_count =</span> <span class="fu">n_distinct</span>(party))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># get a list of districts where candidates received votes from more than 1 party</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>house_temp2 <span class="ot">&lt;-</span> house_temp1 <span class="sc">|&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(distinct_party_count <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># get a list of all years, states and districts where fusion system was used</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>house_temp3 <span class="ot">&lt;-</span> house_temp2 <span class="sc">|&gt;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year, district)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># subset house df to only include results from states, years and districts meeting the criteria</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>house_fusion1 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(house, house_temp3, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"year"</span>, <span class="st">"district"</span> <span class="ot">=</span> <span class="st">"district"</span>))</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># get elections totals for each candidate in states/years/districts meeting the criteria</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>house_fusion1_actuals <span class="ot">&lt;-</span> house_fusion1 <span class="sc">|&gt;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district, candidate.x) <span class="sc">|&gt;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">actual_total_votes =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">|&gt;</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">max_votes =</span> <span class="fu">max</span>(actual_total_votes)) <span class="sc">|&gt;</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_actual_winner =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    actual_total_votes <span class="sc">==</span> max_votes <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co"># get candidate votes from their primary party only and determine a winner</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>house_fusion1_primaryonly <span class="ot">&lt;-</span> house_fusion1 <span class="sc">|&gt;</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"DEMOCRAT"</span> <span class="sc">|</span> party <span class="sc">==</span> <span class="st">"REPUBLICAN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district, candidate.x) <span class="sc">|&gt;</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">actual_primaryparty_votes =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">|&gt;</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">max_primary_votes =</span> <span class="fu">max</span>(actual_primaryparty_votes)) <span class="sc">|&gt;</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_primaryvotesonly_winner =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    actual_primaryparty_votes <span class="sc">==</span> max_primary_votes <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co"># merge 2 datasets</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>house_fusion_merged <span class="ot">&lt;-</span> <span class="fu">left_join</span>(house_fusion1_actuals,</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>  house_fusion1_primaryonly,</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>    <span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>,</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>    <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"year"</span>,</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>    <span class="st">"district"</span> <span class="ot">=</span> <span class="st">"district"</span>,</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>    <span class="st">"candidate.x"</span> <span class="ot">=</span> <span class="st">"candidate.x"</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="co"># filter for records where primary party is either D or R and determine if results would have been different</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>house_fusion_merged_filtered <span class="ot">&lt;-</span> house_fusion_merged <span class="sc">|&gt;</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, district, candidate.x, actual_total_votes, actual_primaryparty_votes, is_actual_winner, is_primaryvotesonly_winner) <span class="sc">|&gt;</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">same_winner =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    is_actual_winner <span class="sc">==</span> is_primaryvotesonly_winner <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((same_winner <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(actual_primaryparty_votes))</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="co"># display a list of states, years and districts where election results would have been different</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>house_fusion_merged_filtered <span class="sc">|&gt;</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, district, is_actual_winner) <span class="sc">|&gt;</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district) <span class="sc">|&gt;</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num_elections =</span> <span class="fu">sum</span>(is_actual_winner)) <span class="sc">|&gt;</span></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>num_elections) <span class="sc">|&gt;</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"List of Elections With  Different Results"</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="nbhnngwzfa" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nbhnngwzfa table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nbhnngwzfa thead, #nbhnngwzfa tbody, #nbhnngwzfa tfoot, #nbhnngwzfa tr, #nbhnngwzfa td, #nbhnngwzfa th {
  border-style: none;
}

#nbhnngwzfa p {
  margin: 0;
  padding: 0;
}

#nbhnngwzfa .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nbhnngwzfa .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nbhnngwzfa .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nbhnngwzfa .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nbhnngwzfa .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbhnngwzfa .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nbhnngwzfa .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbhnngwzfa .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nbhnngwzfa .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nbhnngwzfa .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nbhnngwzfa .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nbhnngwzfa .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nbhnngwzfa .gt_spanner_row {
  border-bottom-style: hidden;
}

#nbhnngwzfa .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nbhnngwzfa .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nbhnngwzfa .gt_from_md > :first-child {
  margin-top: 0;
}

#nbhnngwzfa .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nbhnngwzfa .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nbhnngwzfa .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nbhnngwzfa .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nbhnngwzfa .gt_row_group_first td {
  border-top-width: 2px;
}

#nbhnngwzfa .gt_row_group_first th {
  border-top-width: 2px;
}

#nbhnngwzfa .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbhnngwzfa .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nbhnngwzfa .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nbhnngwzfa .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nbhnngwzfa .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbhnngwzfa .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nbhnngwzfa .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nbhnngwzfa .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nbhnngwzfa .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nbhnngwzfa .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbhnngwzfa .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbhnngwzfa .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbhnngwzfa .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbhnngwzfa .gt_left {
  text-align: left;
}

#nbhnngwzfa .gt_center {
  text-align: center;
}

#nbhnngwzfa .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nbhnngwzfa .gt_font_normal {
  font-weight: normal;
}

#nbhnngwzfa .gt_font_bold {
  font-weight: bold;
}

#nbhnngwzfa .gt_font_italic {
  font-style: italic;
}

#nbhnngwzfa .gt_super {
  font-size: 65%;
}

#nbhnngwzfa .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nbhnngwzfa .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nbhnngwzfa .gt_indent_1 {
  text-indent: 5px;
}

#nbhnngwzfa .gt_indent_2 {
  text-indent: 10px;
}

#nbhnngwzfa .gt_indent_3 {
  text-indent: 15px;
}

#nbhnngwzfa .gt_indent_4 {
  text-indent: 20px;
}

#nbhnngwzfa .gt_indent_5 {
  text-indent: 25px;
}

#nbhnngwzfa .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#nbhnngwzfa div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">List of Elections With Different Results</th>
</tr>
<tr class="odd gt_col_headings">
<th id="year" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">year</th>
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">state</th>
<th id="district" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">district</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="year">1976</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">29</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1980</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">3</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1980</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">6</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1984</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">20</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1986</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">27</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1992</td>
<td class="gt_row gt_left" headers="state">CONNECTICUT</td>
<td class="gt_row gt_right" headers="district">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1992</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">3</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1994</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">1</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">1996</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">1</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">1996</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">30</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2000</td>
<td class="gt_row gt_left" headers="state">CONNECTICUT</td>
<td class="gt_row gt_right" headers="district">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2006</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">25</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2006</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">29</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2010</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">13</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2010</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">19</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2010</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">24</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2010</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">25</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2012</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">27</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">1</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">24</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2018</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">27</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">4</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">17</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="year">2022</td>
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="district">22</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>cnt_fusion_elections <span class="ot">&lt;-</span> <span class="fu">sqldf</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="st">  select 'all fusion elections' as elections,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="st">  count(distinct year||state||district) as count_elections</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="st">  from house_fusion_merged</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="st">  group by 1</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="st">  union all</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="st">  select 'fusion elections with different outcomes' as elections,</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="st">  count(distinct year||state||district) as count_elections</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="st">  from house_fusion_merged</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="st">  where 1=1</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="st">  and is_actual_winner!=is_primaryvotesonly_winner</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="st">  group by 1</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="st">  ;</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>cnt_fusion_elections <span class="sc">|&gt;</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Fusion Elections - Summary Results"</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tdsjaruofk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#tdsjaruofk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#tdsjaruofk thead, #tdsjaruofk tbody, #tdsjaruofk tfoot, #tdsjaruofk tr, #tdsjaruofk td, #tdsjaruofk th {
  border-style: none;
}

#tdsjaruofk p {
  margin: 0;
  padding: 0;
}

#tdsjaruofk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tdsjaruofk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#tdsjaruofk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tdsjaruofk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tdsjaruofk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tdsjaruofk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tdsjaruofk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tdsjaruofk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tdsjaruofk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tdsjaruofk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tdsjaruofk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tdsjaruofk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tdsjaruofk .gt_spanner_row {
  border-bottom-style: hidden;
}

#tdsjaruofk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#tdsjaruofk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tdsjaruofk .gt_from_md > :first-child {
  margin-top: 0;
}

#tdsjaruofk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tdsjaruofk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tdsjaruofk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#tdsjaruofk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#tdsjaruofk .gt_row_group_first td {
  border-top-width: 2px;
}

#tdsjaruofk .gt_row_group_first th {
  border-top-width: 2px;
}

#tdsjaruofk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tdsjaruofk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#tdsjaruofk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#tdsjaruofk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tdsjaruofk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tdsjaruofk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tdsjaruofk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#tdsjaruofk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tdsjaruofk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tdsjaruofk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tdsjaruofk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tdsjaruofk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tdsjaruofk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tdsjaruofk .gt_left {
  text-align: left;
}

#tdsjaruofk .gt_center {
  text-align: center;
}

#tdsjaruofk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tdsjaruofk .gt_font_normal {
  font-weight: normal;
}

#tdsjaruofk .gt_font_bold {
  font-weight: bold;
}

#tdsjaruofk .gt_font_italic {
  font-style: italic;
}

#tdsjaruofk .gt_super {
  font-size: 65%;
}

#tdsjaruofk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#tdsjaruofk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#tdsjaruofk .gt_indent_1 {
  text-indent: 5px;
}

#tdsjaruofk .gt_indent_2 {
  text-indent: 10px;
}

#tdsjaruofk .gt_indent_3 {
  text-indent: 15px;
}

#tdsjaruofk .gt_indent_4 {
  text-indent: 20px;
}

#tdsjaruofk .gt_indent_5 {
  text-indent: 25px;
}

#tdsjaruofk .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#tdsjaruofk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border">Fusion Elections - Summary Results</th>
</tr>
<tr class="odd gt_col_headings">
<th id="elections" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">elections</th>
<th id="count_elections" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">count_elections</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="elections">all fusion elections</td>
<td class="gt_row gt_right" headers="count_elections">754</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="elections">fusion elections with different outcomes</td>
<td class="gt_row gt_right" headers="count_elections">24</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Based on these results, we ascertain that the use of fusion system in elections has no discernible effect on the outcome as the results would have been different only in a handful of cases (24 out of 754 elections, or 3.2%).</p>
<blockquote class="blockquote">
<p>Q3. Do presidential candidates tend to run ahead of or run behind congressional candidates in the same state? That is, does a Democratic candidate for president tend to get more votes in a given state than all Democratic congressional candidates in the same state? Does this trend differ over time? Does it differ across states or across parties? Are any presidents particularly more or less popular than their co-partisans?</p>
</blockquote>
<p>To answer these questions, first we need to get results of Presidential and Congressional elections for every state for 12 years when Presidential elections were held. (You can look up results of individual states in the table below.)</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get a df with results of presidential elections by state filtered to R and D candidates only</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>pres_df1 <span class="ot">&lt;-</span> <span class="fu">sqldf</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="st">  with a as(</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="st">  select year,</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="st">  state,</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="st">  candidate,</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="st">  party_simplified as party,</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="st">  candidatevotes as votes</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="st">  from pres</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="st">  where 1=1</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="st">  and PARTY_SIMPLIFIED in ('DEMOCRAT','REPUBLICAN')</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="st">  GROUP BY 1,2,3,4</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="st">  ,</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="st">  b as (</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="st">  select a.*,</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="st">  row_number() over(partition by year,state order by votes desc) as is_winner</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="st">  from a</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="st">  select year,</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="st">  state,</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="st">  candidate,</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="st">  party,</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="st">  votes,</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="st">  case</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="st">  when is_winner=1 then 1 else 0 end as is_pres_winner</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="st">  from b</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="st">  ;</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a><span class="co"># get a df with records for house elections filtered to D and R only</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>house_prim_only <span class="ot">&lt;-</span> house <span class="sc">|&gt;</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"DEMOCRAT"</span> <span class="sc">|</span> party <span class="sc">==</span> <span class="st">"REPUBLICAN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, party) <span class="sc">|&gt;</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_party_votes =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">|&gt;</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="co"># determine  max votes by year/state elections</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>house_prim_only_agg <span class="ot">&lt;-</span> house_prim_only <span class="sc">%&gt;%</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state) <span class="sc">%&gt;%</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">max_votes =</span> <span class="fu">max</span>(total_party_votes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a><span class="co"># merge 2 dfs</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>house_prim_only_merged <span class="ot">&lt;-</span> <span class="fu">left_join</span>(house_prim_only,</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>  house_prim_only_agg,</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>, <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"year"</span>)</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a><span class="co"># identify a winning party in congressional election</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>house_prim_only_merged2 <span class="ot">&lt;-</span> house_prim_only_merged <span class="sc">|&gt;</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">house_party_winner =</span> <span class="fu">case_when</span>(</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>    total_party_votes <span class="sc">==</span> max_votes <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a><span class="co"># join dfs with house and presidential results</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>house_pres_merged <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(pres_df1,</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>  house_prim_only_merged2,</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>    <span class="st">"year"</span> <span class="ot">=</span> <span class="st">"year"</span>,</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>    <span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>,</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>    <span class="st">"party"</span> <span class="ot">=</span> <span class="st">"party"</span></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a><span class="co"># rename columns for clarity</span></span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>house_pres_merged_for_plot <span class="ot">&lt;-</span> house_pres_merged <span class="sc">|&gt;</span></span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, candidate, party, votes, is_pres_winner, total_party_votes, house_party_winner) <span class="sc">|&gt;</span></span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">presidential_votes =</span> votes,</span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_party_winner =</span> house_party_winner</span>
<span id="cb8-83"><a href="#cb8-83" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-84"><a href="#cb8-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">president_more_votes =</span> <span class="fu">case_when</span>(</span>
<span id="cb8-85"><a href="#cb8-85" aria-hidden="true" tabindex="-1"></a>    presidential_votes <span class="sc">&gt;</span> total_party_votes <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-86"><a href="#cb8-86" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb8-87"><a href="#cb8-87" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb8-88"><a href="#cb8-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">delta_votes =</span> presidential_votes <span class="sc">-</span> total_party_votes)</span>
<span id="cb8-89"><a href="#cb8-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-90"><a href="#cb8-90" aria-hidden="true" tabindex="-1"></a><span class="co"># create a df for D party</span></span>
<span id="cb8-91"><a href="#cb8-91" aria-hidden="true" tabindex="-1"></a>dem_party <span class="ot">&lt;-</span> house_pres_merged_for_plot <span class="sc">|&gt;</span></span>
<span id="cb8-92"><a href="#cb8-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"DEMOCRAT"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-93"><a href="#cb8-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">|&gt;</span></span>
<span id="cb8-94"><a href="#cb8-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb8-95"><a href="#cb8-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">D_president_more_popular_than_cogress =</span> <span class="fu">sum</span>(president_more_votes),</span>
<span id="cb8-96"><a href="#cb8-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">D_president_more_popular_share =</span> D_president_more_popular_than_cogress <span class="sc">/</span> <span class="dv">12</span>,</span>
<span id="cb8-97"><a href="#cb8-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">D_avg_difference_votes =</span> <span class="fu">mean</span>(delta_votes)</span>
<span id="cb8-98"><a href="#cb8-98" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-99"><a href="#cb8-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-100"><a href="#cb8-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">D_avg_delta_votes_ranked =</span> <span class="fu">rank</span>(<span class="sc">-</span>D_avg_difference_votes, <span class="at">ties.method =</span> <span class="st">"first"</span>))</span>
<span id="cb8-101"><a href="#cb8-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-102"><a href="#cb8-102" aria-hidden="true" tabindex="-1"></a><span class="co"># create a df for R party</span></span>
<span id="cb8-103"><a href="#cb8-103" aria-hidden="true" tabindex="-1"></a>rep_party <span class="ot">&lt;-</span> house_pres_merged_for_plot <span class="sc">|&gt;</span></span>
<span id="cb8-104"><a href="#cb8-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">==</span> <span class="st">"REPUBLICAN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-105"><a href="#cb8-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">|&gt;</span></span>
<span id="cb8-106"><a href="#cb8-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb8-107"><a href="#cb8-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">R_president_more_popular_than_cogress =</span> <span class="fu">sum</span>(president_more_votes),</span>
<span id="cb8-108"><a href="#cb8-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">R_president_more_popular_share =</span> R_president_more_popular_than_cogress <span class="sc">/</span> <span class="dv">12</span>,</span>
<span id="cb8-109"><a href="#cb8-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">R_avg_difference_votes =</span> <span class="fu">mean</span>(delta_votes)</span>
<span id="cb8-110"><a href="#cb8-110" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-111"><a href="#cb8-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-112"><a href="#cb8-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">R_avg_delta_votes_ranked =</span> <span class="fu">rank</span>(<span class="sc">-</span>R_avg_difference_votes, <span class="at">ties.method =</span> <span class="st">"first"</span>))</span>
<span id="cb8-113"><a href="#cb8-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-114"><a href="#cb8-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-115"><a href="#cb8-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-116"><a href="#cb8-116" aria-hidden="true" tabindex="-1"></a><span class="co"># join 2 dfs</span></span>
<span id="cb8-117"><a href="#cb8-117" aria-hidden="true" tabindex="-1"></a>dem_rep_df <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(dem_party, rep_party, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>))</span>
<span id="cb8-118"><a href="#cb8-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-119"><a href="#cb8-119" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb8-120"><a href="#cb8-120" aria-hidden="true" tabindex="-1"></a>dem_rep_df <span class="sc">|&gt;</span></span>
<span id="cb8-121"><a href="#cb8-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-122"><a href="#cb8-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">R_president_more_popular_share =</span> scales<span class="sc">::</span><span class="fu">percent</span>(R_president_more_popular_share),</span>
<span id="cb8-123"><a href="#cb8-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">D_president_more_popular_share =</span> scales<span class="sc">::</span><span class="fu">percent</span>(D_president_more_popular_share),</span>
<span id="cb8-124"><a href="#cb8-124" aria-hidden="true" tabindex="-1"></a>    <span class="at">R_avg_difference_votes =</span> <span class="fu">format</span>(<span class="fu">round</span>(<span class="fu">as.numeric</span>(R_avg_difference_votes), <span class="dv">0</span>), <span class="at">nsmall =</span> <span class="dv">0</span>, <span class="at">big.mark =</span> <span class="st">","</span>),</span>
<span id="cb8-125"><a href="#cb8-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">D_avg_difference_votes =</span> <span class="fu">format</span>(<span class="fu">round</span>(<span class="fu">as.numeric</span>(D_avg_difference_votes), <span class="dv">0</span>), <span class="at">nsmall =</span> <span class="dv">0</span>, <span class="at">big.mark =</span> <span class="st">","</span>)</span>
<span id="cb8-126"><a href="#cb8-126" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-127"><a href="#cb8-127" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb8-128"><a href="#cb8-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">5</span>),</span>
<span id="cb8-129"><a href="#cb8-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">filter =</span> <span class="st">"top"</span></span>
<span id="cb8-130"><a href="#cb8-130" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-49bfe8987ac9888769d1" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-49bfe8987ac9888769d1">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"12\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"51\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"12\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"50\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],["ALABAMA","ALASKA","ARIZONA","ARKANSAS","CALIFORNIA","COLORADO","CONNECTICUT","DELAWARE","FLORIDA","GEORGIA","HAWAII","IDAHO","ILLINOIS","INDIANA","IOWA","KANSAS","KENTUCKY","LOUISIANA","MAINE","MARYLAND","MASSACHUSETTS","MICHIGAN","MINNESOTA","MISSISSIPPI","MISSOURI","MONTANA","NEBRASKA","NEVADA","NEW HAMPSHIRE","NEW JERSEY","NEW MEXICO","NEW YORK","NORTH CAROLINA","NORTH DAKOTA","OHIO","OKLAHOMA","OREGON","PENNSYLVANIA","RHODE ISLAND","SOUTH CAROLINA","SOUTH DAKOTA","TENNESSEE","TEXAS","UTAH","VERMONT","VIRGINIA","WASHINGTON","WEST VIRGINIA","WISCONSIN","WYOMING"],[7,7,8,9,7,9,8,9,10,7,4,3,8,2,8,8,8,12,3,7,0,6,5,6,5,2,10,7,8,8,6,11,3,2,8,7,3,8,5,8,3,9,6,1,8,11,5,0,8,4],["58.3%","58.3%","66.7%","75.0%","58.3%","75.0%","66.7%","75.0%","83.3%","58.3%","33.3%","25.0%","66.7%","16.7%","66.7%","66.7%","66.7%","100.0%","25.0%","58.3%","0.0%","50.0%","41.7%","50.0%","41.7%","16.7%","83.3%","58.3%","66.7%","66.7%","50.0%","91.7%","25.0%","16.7%","66.7%","58.3%","25.0%","66.7%","41.7%","66.7%","25.0%","75.0%","50.0%","8.3%","66.7%","91.7%","41.7%","0.0%","66.7%","33.3%"],["   8,080","   4,776"," -27,123"," 101,423","  78,929","  49,749","  25,806","  27,235"," 478,858","  17,809"," -31,555"," -27,361","  57,691","-105,949","  31,529","  29,465","  28,395"," 385,606"," -17,200","-109,728","-252,916","   9,794"," 240,470"," -43,238"," -59,130"," -17,348","  26,731","   7,913","   4,878"," 110,898","  -2,450"," 411,674"," -91,172"," -55,673","  81,078"," -14,755"," -65,015","  83,027","   3,975","  21,633"," -31,922","  35,111"," -56,189"," -70,086","  47,739"," 130,814"," -57,224"," -73,841","  39,427","  -6,706"],[26,29,36,7,10,12,21,19,1,24,38,37,11,49,16,17,18,3,34,50,51,25,4,40,44,35,20,27,28,6,31,2,48,41,9,33,45,8,30,22,39,15,42,46,13,5,43,47,14,32],[11,3,6,8,9,7,9,5,9,6,10,8,7,9,5,4,8,11,6,7,10,9,8,10,9,7,0,8,8,9,6,10,9,9,8,10,9,7,7,8,7,11,8,8,6,7,8,12,7,7],["91.7%","25.0%","50.0%","66.7%","75.0%","58.3%","75.0%","41.7%","75.0%","50.0%","83.3%","66.7%","58.3%","75.0%","41.7%","33.3%","66.7%","91.7%","50.0%","58.3%","83.3%","75.0%","66.7%","83.3%","75.0%","58.3%","0.0%","66.7%","66.7%","75.0%","50.0%","83.3%","75.0%","75.0%","66.7%","83.3%","75.0%","58.3%","58.3%","66.7%","58.3%","91.7%","66.7%","66.7%","50.0%","58.3%","66.7%","100.0%","58.3%","58.3%"],["171,647"," -5,668","  5,572","137,063","275,752"," -8,619"," 48,271","-18,734","374,545","129,465"," 49,272"," 11,170"," 29,811","106,894","-31,670"," -9,033"," 71,253","368,721","-12,426"," 86,819","445,461","118,029"," 61,008","100,983"," 70,637","  2,180","-41,864"," 17,989","  2,537"," 98,025","  2,854","314,531","131,152"," 37,015"," 56,146","134,098","102,412"," 34,607"," 17,118"," 42,368"," 13,564","194,543","452,220"," 41,012","  8,480"," 72,666"," 37,888","119,470","  3,419","  5,433"],[8,44,38,9,6,45,26,48,3,12,25,36,32,15,49,46,21,4,47,19,2,14,23,17,22,43,50,33,42,18,41,5,11,30,24,10,16,31,34,27,35,7,1,28,37,20,29,13,40,39]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>state<\/th>\n      <th>D_president_more_popular_than_cogress<\/th>\n      <th>D_president_more_popular_share<\/th>\n      <th>D_avg_difference_votes<\/th>\n      <th>D_avg_delta_votes_ranked<\/th>\n      <th>R_president_more_popular_than_cogress<\/th>\n      <th>R_president_more_popular_share<\/th>\n      <th>R_avg_difference_votes<\/th>\n      <th>R_avg_delta_votes_ranked<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[2,5,6,9]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"state","targets":1},{"name":"D_president_more_popular_than_cogress","targets":2},{"name":"D_president_more_popular_share","targets":3},{"name":"D_avg_difference_votes","targets":4},{"name":"D_avg_delta_votes_ranked","targets":5},{"name":"R_president_more_popular_than_cogress","targets":6},{"name":"R_president_more_popular_share","targets":7},{"name":"R_avg_difference_votes","targets":8},{"name":"R_avg_delta_votes_ranked","targets":9}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Now that we have records with Presidential and Congress election results for all states, we can answer this question. Across all states in 12 elections, Democratic candidates had more votes than all Congressional candidates from Democratic party in 53% of all cases. For Republican candidates, this number was even higher at 65%.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dem_rep_df <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">D_president_more_popular =</span> <span class="fu">mean</span>(D_president_more_popular_share, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">R_president_more_popular =</span> <span class="fu">mean</span>(R_president_more_popular_share, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">D_president_more_popular =</span> scales<span class="sc">::</span><span class="fu">percent</span>(D_president_more_popular),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">R_president_more_popular =</span> scales<span class="sc">::</span><span class="fu">percent</span>(R_president_more_popular)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  D_president_more_popular R_president_more_popular
  &lt;chr&gt;                    &lt;chr&gt;                   
1 53%                      65%                     </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## display df by state</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>dem_rep_df_plot <span class="ot">&lt;-</span> dem_rep_df <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, R_president_more_popular_share, D_president_more_popular_share) <span class="sc">|&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">D_president_more_popular_share =</span> scales<span class="sc">::</span><span class="fu">percent</span>(D_president_more_popular_share),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">R_president_more_popular_share =</span> scales<span class="sc">::</span><span class="fu">percent</span>(R_president_more_popular_share)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>dem_rep_df_plot <span class="sc">|&gt;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="jiyjihjrpq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jiyjihjrpq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jiyjihjrpq thead, #jiyjihjrpq tbody, #jiyjihjrpq tfoot, #jiyjihjrpq tr, #jiyjihjrpq td, #jiyjihjrpq th {
  border-style: none;
}

#jiyjihjrpq p {
  margin: 0;
  padding: 0;
}

#jiyjihjrpq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jiyjihjrpq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jiyjihjrpq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jiyjihjrpq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jiyjihjrpq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jiyjihjrpq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jiyjihjrpq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jiyjihjrpq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jiyjihjrpq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jiyjihjrpq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jiyjihjrpq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jiyjihjrpq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jiyjihjrpq .gt_spanner_row {
  border-bottom-style: hidden;
}

#jiyjihjrpq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jiyjihjrpq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jiyjihjrpq .gt_from_md > :first-child {
  margin-top: 0;
}

#jiyjihjrpq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jiyjihjrpq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jiyjihjrpq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#jiyjihjrpq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jiyjihjrpq .gt_row_group_first td {
  border-top-width: 2px;
}

#jiyjihjrpq .gt_row_group_first th {
  border-top-width: 2px;
}

#jiyjihjrpq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jiyjihjrpq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#jiyjihjrpq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jiyjihjrpq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jiyjihjrpq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jiyjihjrpq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jiyjihjrpq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#jiyjihjrpq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jiyjihjrpq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jiyjihjrpq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jiyjihjrpq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jiyjihjrpq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jiyjihjrpq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jiyjihjrpq .gt_left {
  text-align: left;
}

#jiyjihjrpq .gt_center {
  text-align: center;
}

#jiyjihjrpq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jiyjihjrpq .gt_font_normal {
  font-weight: normal;
}

#jiyjihjrpq .gt_font_bold {
  font-weight: bold;
}

#jiyjihjrpq .gt_font_italic {
  font-style: italic;
}

#jiyjihjrpq .gt_super {
  font-size: 65%;
}

#jiyjihjrpq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jiyjihjrpq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jiyjihjrpq .gt_indent_1 {
  text-indent: 5px;
}

#jiyjihjrpq .gt_indent_2 {
  text-indent: 10px;
}

#jiyjihjrpq .gt_indent_3 {
  text-indent: 15px;
}

#jiyjihjrpq .gt_indent_4 {
  text-indent: 20px;
}

#jiyjihjrpq .gt_indent_5 {
  text-indent: 25px;
}

#jiyjihjrpq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#jiyjihjrpq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="state" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">state</th>
<th id="R_president_more_popular_share" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">R_president_more_popular_share</th>
<th id="D_president_more_popular_share" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">D_president_more_popular_share</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="state">ALABAMA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">91.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">58.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">ALASKA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">25.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">58.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">ARIZONA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">50.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">ARKANSAS</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">75.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">CALIFORNIA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">58.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">COLORADO</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">75.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">CONNECTICUT</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">DELAWARE</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">41.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">75.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">FLORIDA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">83.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">GEORGIA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">50.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">58.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">HAWAII</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">83.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">33.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">IDAHO</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">25.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">ILLINOIS</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">INDIANA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">16.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">IOWA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">41.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">KANSAS</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">33.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">KENTUCKY</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">LOUISIANA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">91.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">100.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">MAINE</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">50.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">25.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">MARYLAND</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">58.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">MASSACHUSETTS</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">83.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">0.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">MICHIGAN</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">50.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">MINNESOTA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">41.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">MISSISSIPPI</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">83.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">50.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">MISSOURI</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">41.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">MONTANA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">16.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">NEBRASKA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">0.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">83.3%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">NEVADA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">58.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">NEW HAMPSHIRE</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">NEW JERSEY</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">NEW MEXICO</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">50.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">50.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">NEW YORK</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">83.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">91.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">NORTH CAROLINA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">25.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">NORTH DAKOTA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">16.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">OHIO</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">OKLAHOMA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">83.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">58.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">OREGON</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">75.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">25.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">PENNSYLVANIA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">RHODE ISLAND</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">41.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">SOUTH CAROLINA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">SOUTH DAKOTA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">25.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">TENNESSEE</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">91.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">75.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">TEXAS</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">50.0%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">UTAH</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">8.3%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">VERMONT</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">50.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">VIRGINIA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">91.7%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">WASHINGTON</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">66.7%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">41.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">WEST VIRGINIA</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">100.0%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">0.0%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="state">WISCONSIN</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">66.7%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="state">WYOMING</td>
<td class="gt_row gt_right" headers="R_president_more_popular_share">58.3%</td>
<td class="gt_row gt_right" headers="D_president_more_popular_share">33.3%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot states data</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>dem_rep_plot1 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dem_rep_df,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>R_president_more_popular_share,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>D_president_more_popular_share,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"scatter"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">"markers"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">5</span>),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="sc">~</span>state</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">""</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Popularity of R president vs Congress"</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="dv">8</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickfont =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">titlefont =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Popularity of D president vs Congress"</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="dv">8</span>,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickfont =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">titlefont =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">8</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend =</span> <span class="fu">list</span>(</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">orientation =</span> <span class="st">"h"</span>, <span class="co"># Horizontal legend</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fl">0.5</span>, <span class="co"># Center horizontally</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="co"># Align center</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>,</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="dv">8</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>dem_rep_plot1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-affc5eb01541c8dce01a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-affc5eb01541c8dce01a">{"x":{"visdat":{"1bc1a8533c6":["function () ","plotlyVisDat"]},"cur_data":"1bc1a8533c6","attrs":{"1bc1a8533c6":{"x":{},"y":{},"mode":"markers","marker":{"size":5},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"","xaxis":{"domain":[0,1],"automargin":true,"title":"Popularity of R president vs Congress","font":8,"tickfont":{"size":8},"titlefont":{"size":8}},"yaxis":{"domain":[0,1],"automargin":true,"title":"Popularity of D president vs Congress","font":8,"tickfont":{"size":8},"titlefont":{"size":8}},"legend":{"font":{"size":8},"orientation":"h","x":0.5,"xanchor":"center","y":-0.20000000000000001,"font.1":8},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[0.91666666666666663],"y":[0.58333333333333337],"mode":"markers","marker":{"color":"rgba(102,194,165,1)","size":5,"line":{"color":"rgba(102,194,165,1)"}},"type":"scatter","name":"ALABAMA","textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.25],"y":[0.58333333333333337],"mode":"markers","marker":{"color":"rgba(136,188,155,1)","size":5,"line":{"color":"rgba(136,188,155,1)"}},"type":"scatter","name":"ALASKA","textfont":{"color":"rgba(136,188,155,1)"},"error_y":{"color":"rgba(136,188,155,1)"},"error_x":{"color":"rgba(136,188,155,1)"},"line":{"color":"rgba(136,188,155,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.5],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(162,182,146,1)","size":5,"line":{"color":"rgba(162,182,146,1)"}},"type":"scatter","name":"ARIZONA","textfont":{"color":"rgba(162,182,146,1)"},"error_y":{"color":"rgba(162,182,146,1)"},"error_x":{"color":"rgba(162,182,146,1)"},"line":{"color":"rgba(162,182,146,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.75],"mode":"markers","marker":{"color":"rgba(184,175,136,1)","size":5,"line":{"color":"rgba(184,175,136,1)"}},"type":"scatter","name":"ARKANSAS","textfont":{"color":"rgba(184,175,136,1)"},"error_y":{"color":"rgba(184,175,136,1)"},"error_x":{"color":"rgba(184,175,136,1)"},"line":{"color":"rgba(184,175,136,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.58333333333333337],"mode":"markers","marker":{"color":"rgba(203,168,126,1)","size":5,"line":{"color":"rgba(203,168,126,1)"}},"type":"scatter","name":"CALIFORNIA","textfont":{"color":"rgba(203,168,126,1)"},"error_y":{"color":"rgba(203,168,126,1)"},"error_x":{"color":"rgba(203,168,126,1)"},"line":{"color":"rgba(203,168,126,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.75],"mode":"markers","marker":{"color":"rgba(220,160,117,1)","size":5,"line":{"color":"rgba(220,160,117,1)"}},"type":"scatter","name":"COLORADO","textfont":{"color":"rgba(220,160,117,1)"},"error_y":{"color":"rgba(220,160,117,1)"},"error_x":{"color":"rgba(220,160,117,1)"},"line":{"color":"rgba(220,160,117,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(237,151,107,1)","size":5,"line":{"color":"rgba(237,151,107,1)"}},"type":"scatter","name":"CONNECTICUT","textfont":{"color":"rgba(237,151,107,1)"},"error_y":{"color":"rgba(237,151,107,1)"},"error_x":{"color":"rgba(237,151,107,1)"},"line":{"color":"rgba(237,151,107,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.41666666666666669],"y":[0.75],"mode":"markers","marker":{"color":"rgba(252,141,98,1)","size":5,"line":{"color":"rgba(252,141,98,1)"}},"type":"scatter","name":"DELAWARE","textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.83333333333333337],"mode":"markers","marker":{"color":"rgba(240,144,113,1)","size":5,"line":{"color":"rgba(240,144,113,1)"}},"type":"scatter","name":"FLORIDA","textfont":{"color":"rgba(240,144,113,1)"},"error_y":{"color":"rgba(240,144,113,1)"},"error_x":{"color":"rgba(240,144,113,1)"},"line":{"color":"rgba(240,144,113,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.5],"y":[0.58333333333333337],"mode":"markers","marker":{"color":"rgba(228,147,129,1)","size":5,"line":{"color":"rgba(228,147,129,1)"}},"type":"scatter","name":"GEORGIA","textfont":{"color":"rgba(228,147,129,1)"},"error_y":{"color":"rgba(228,147,129,1)"},"error_x":{"color":"rgba(228,147,129,1)"},"line":{"color":"rgba(228,147,129,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.83333333333333337],"y":[0.33333333333333331],"mode":"markers","marker":{"color":"rgba(214,150,144,1)","size":5,"line":{"color":"rgba(214,150,144,1)"}},"type":"scatter","name":"HAWAII","textfont":{"color":"rgba(214,150,144,1)"},"error_y":{"color":"rgba(214,150,144,1)"},"error_x":{"color":"rgba(214,150,144,1)"},"line":{"color":"rgba(214,150,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.25],"mode":"markers","marker":{"color":"rgba(200,153,158,1)","size":5,"line":{"color":"rgba(200,153,158,1)"}},"type":"scatter","name":"IDAHO","textfont":{"color":"rgba(200,153,158,1)"},"error_y":{"color":"rgba(200,153,158,1)"},"error_x":{"color":"rgba(200,153,158,1)"},"line":{"color":"rgba(200,153,158,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(183,155,173,1)","size":5,"line":{"color":"rgba(183,155,173,1)"}},"type":"scatter","name":"ILLINOIS","textfont":{"color":"rgba(183,155,173,1)"},"error_y":{"color":"rgba(183,155,173,1)"},"error_x":{"color":"rgba(183,155,173,1)"},"line":{"color":"rgba(183,155,173,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.16666666666666666],"mode":"markers","marker":{"color":"rgba(164,158,188,1)","size":5,"line":{"color":"rgba(164,158,188,1)"}},"type":"scatter","name":"INDIANA","textfont":{"color":"rgba(164,158,188,1)"},"error_y":{"color":"rgba(164,158,188,1)"},"error_x":{"color":"rgba(164,158,188,1)"},"line":{"color":"rgba(164,158,188,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.41666666666666669],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(141,160,203,1)","size":5,"line":{"color":"rgba(141,160,203,1)"}},"type":"scatter","name":"IOWA","textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.33333333333333331],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(156,158,202,1)","size":5,"line":{"color":"rgba(156,158,202,1)"}},"type":"scatter","name":"KANSAS","textfont":{"color":"rgba(156,158,202,1)"},"error_y":{"color":"rgba(156,158,202,1)"},"error_x":{"color":"rgba(156,158,202,1)"},"line":{"color":"rgba(156,158,202,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(170,155,201,1)","size":5,"line":{"color":"rgba(170,155,201,1)"}},"type":"scatter","name":"KENTUCKY","textfont":{"color":"rgba(170,155,201,1)"},"error_y":{"color":"rgba(170,155,201,1)"},"error_x":{"color":"rgba(170,155,201,1)"},"line":{"color":"rgba(170,155,201,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.91666666666666663],"y":[1],"mode":"markers","marker":{"color":"rgba(183,152,200,1)","size":5,"line":{"color":"rgba(183,152,200,1)"}},"type":"scatter","name":"LOUISIANA","textfont":{"color":"rgba(183,152,200,1)"},"error_y":{"color":"rgba(183,152,200,1)"},"error_x":{"color":"rgba(183,152,200,1)"},"line":{"color":"rgba(183,152,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.5],"y":[0.25],"mode":"markers","marker":{"color":"rgba(196,149,198,1)","size":5,"line":{"color":"rgba(196,149,198,1)"}},"type":"scatter","name":"MAINE","textfont":{"color":"rgba(196,149,198,1)"},"error_y":{"color":"rgba(196,149,198,1)"},"error_x":{"color":"rgba(196,149,198,1)"},"line":{"color":"rgba(196,149,198,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.58333333333333337],"mode":"markers","marker":{"color":"rgba(208,146,197,1)","size":5,"line":{"color":"rgba(208,146,197,1)"}},"type":"scatter","name":"MARYLAND","textfont":{"color":"rgba(208,146,197,1)"},"error_y":{"color":"rgba(208,146,197,1)"},"error_x":{"color":"rgba(208,146,197,1)"},"line":{"color":"rgba(208,146,197,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.83333333333333337],"y":[0],"mode":"markers","marker":{"color":"rgba(220,142,196,1)","size":5,"line":{"color":"rgba(220,142,196,1)"}},"type":"scatter","name":"MASSACHUSETTS","textfont":{"color":"rgba(220,142,196,1)"},"error_y":{"color":"rgba(220,142,196,1)"},"error_x":{"color":"rgba(220,142,196,1)"},"line":{"color":"rgba(220,142,196,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.5],"mode":"markers","marker":{"color":"rgba(231,138,195,1)","size":5,"line":{"color":"rgba(231,138,195,1)"}},"type":"scatter","name":"MICHIGAN","textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.41666666666666669],"mode":"markers","marker":{"color":"rgba(225,151,181,1)","size":5,"line":{"color":"rgba(225,151,181,1)"}},"type":"scatter","name":"MINNESOTA","textfont":{"color":"rgba(225,151,181,1)"},"error_y":{"color":"rgba(225,151,181,1)"},"error_x":{"color":"rgba(225,151,181,1)"},"line":{"color":"rgba(225,151,181,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.83333333333333337],"y":[0.5],"mode":"markers","marker":{"color":"rgba(218,163,166,1)","size":5,"line":{"color":"rgba(218,163,166,1)"}},"type":"scatter","name":"MISSISSIPPI","textfont":{"color":"rgba(218,163,166,1)"},"error_y":{"color":"rgba(218,163,166,1)"},"error_x":{"color":"rgba(218,163,166,1)"},"line":{"color":"rgba(218,163,166,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.41666666666666669],"mode":"markers","marker":{"color":"rgba(210,175,152,1)","size":5,"line":{"color":"rgba(210,175,152,1)"}},"type":"scatter","name":"MISSOURI","textfont":{"color":"rgba(210,175,152,1)"},"error_y":{"color":"rgba(210,175,152,1)"},"error_x":{"color":"rgba(210,175,152,1)"},"line":{"color":"rgba(210,175,152,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.16666666666666666],"mode":"markers","marker":{"color":"rgba(201,186,136,1)","size":5,"line":{"color":"rgba(201,186,136,1)"}},"type":"scatter","name":"MONTANA","textfont":{"color":"rgba(201,186,136,1)"},"error_y":{"color":"rgba(201,186,136,1)"},"error_x":{"color":"rgba(201,186,136,1)"},"line":{"color":"rgba(201,186,136,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0],"y":[0.83333333333333337],"mode":"markers","marker":{"color":"rgba(191,196,120,1)","size":5,"line":{"color":"rgba(191,196,120,1)"}},"type":"scatter","name":"NEBRASKA","textfont":{"color":"rgba(191,196,120,1)"},"error_y":{"color":"rgba(191,196,120,1)"},"error_x":{"color":"rgba(191,196,120,1)"},"line":{"color":"rgba(191,196,120,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.58333333333333337],"mode":"markers","marker":{"color":"rgba(179,206,103,1)","size":5,"line":{"color":"rgba(179,206,103,1)"}},"type":"scatter","name":"NEVADA","textfont":{"color":"rgba(179,206,103,1)"},"error_y":{"color":"rgba(179,206,103,1)"},"error_x":{"color":"rgba(179,206,103,1)"},"line":{"color":"rgba(179,206,103,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(166,216,84,1)","size":5,"line":{"color":"rgba(166,216,84,1)"}},"type":"scatter","name":"NEW HAMPSHIRE","textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(180,216,80,1)","size":5,"line":{"color":"rgba(180,216,80,1)"}},"type":"scatter","name":"NEW JERSEY","textfont":{"color":"rgba(180,216,80,1)"},"error_y":{"color":"rgba(180,216,80,1)"},"error_x":{"color":"rgba(180,216,80,1)"},"line":{"color":"rgba(180,216,80,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.5],"y":[0.5],"mode":"markers","marker":{"color":"rgba(194,217,75,1)","size":5,"line":{"color":"rgba(194,217,75,1)"}},"type":"scatter","name":"NEW MEXICO","textfont":{"color":"rgba(194,217,75,1)"},"error_y":{"color":"rgba(194,217,75,1)"},"error_x":{"color":"rgba(194,217,75,1)"},"line":{"color":"rgba(194,217,75,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.83333333333333337],"y":[0.91666666666666663],"mode":"markers","marker":{"color":"rgba(206,217,70,1)","size":5,"line":{"color":"rgba(206,217,70,1)"}},"type":"scatter","name":"NEW YORK","textfont":{"color":"rgba(206,217,70,1)"},"error_y":{"color":"rgba(206,217,70,1)"},"error_x":{"color":"rgba(206,217,70,1)"},"line":{"color":"rgba(206,217,70,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.25],"mode":"markers","marker":{"color":"rgba(219,217,65,1)","size":5,"line":{"color":"rgba(219,217,65,1)"}},"type":"scatter","name":"NORTH CAROLINA","textfont":{"color":"rgba(219,217,65,1)"},"error_y":{"color":"rgba(219,217,65,1)"},"error_x":{"color":"rgba(219,217,65,1)"},"line":{"color":"rgba(219,217,65,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.16666666666666666],"mode":"markers","marker":{"color":"rgba(231,217,60,1)","size":5,"line":{"color":"rgba(231,217,60,1)"}},"type":"scatter","name":"NORTH DAKOTA","textfont":{"color":"rgba(231,217,60,1)"},"error_y":{"color":"rgba(231,217,60,1)"},"error_x":{"color":"rgba(231,217,60,1)"},"line":{"color":"rgba(231,217,60,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(243,217,54,1)","size":5,"line":{"color":"rgba(243,217,54,1)"}},"type":"scatter","name":"OHIO","textfont":{"color":"rgba(243,217,54,1)"},"error_y":{"color":"rgba(243,217,54,1)"},"error_x":{"color":"rgba(243,217,54,1)"},"line":{"color":"rgba(243,217,54,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.83333333333333337],"y":[0.58333333333333337],"mode":"markers","marker":{"color":"rgba(255,217,47,1)","size":5,"line":{"color":"rgba(255,217,47,1)"}},"type":"scatter","name":"OKLAHOMA","textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.75],"y":[0.25],"mode":"markers","marker":{"color":"rgba(252,214,68,1)","size":5,"line":{"color":"rgba(252,214,68,1)"}},"type":"scatter","name":"OREGON","textfont":{"color":"rgba(252,214,68,1)"},"error_y":{"color":"rgba(252,214,68,1)"},"error_x":{"color":"rgba(252,214,68,1)"},"line":{"color":"rgba(252,214,68,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(249,211,84,1)","size":5,"line":{"color":"rgba(249,211,84,1)"}},"type":"scatter","name":"PENNSYLVANIA","textfont":{"color":"rgba(249,211,84,1)"},"error_y":{"color":"rgba(249,211,84,1)"},"error_x":{"color":"rgba(249,211,84,1)"},"line":{"color":"rgba(249,211,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.41666666666666669],"mode":"markers","marker":{"color":"rgba(245,208,98,1)","size":5,"line":{"color":"rgba(245,208,98,1)"}},"type":"scatter","name":"RHODE ISLAND","textfont":{"color":"rgba(245,208,98,1)"},"error_y":{"color":"rgba(245,208,98,1)"},"error_x":{"color":"rgba(245,208,98,1)"},"line":{"color":"rgba(245,208,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(242,205,112,1)","size":5,"line":{"color":"rgba(242,205,112,1)"}},"type":"scatter","name":"SOUTH CAROLINA","textfont":{"color":"rgba(242,205,112,1)"},"error_y":{"color":"rgba(242,205,112,1)"},"error_x":{"color":"rgba(242,205,112,1)"},"line":{"color":"rgba(242,205,112,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.25],"mode":"markers","marker":{"color":"rgba(238,202,124,1)","size":5,"line":{"color":"rgba(238,202,124,1)"}},"type":"scatter","name":"SOUTH DAKOTA","textfont":{"color":"rgba(238,202,124,1)"},"error_y":{"color":"rgba(238,202,124,1)"},"error_x":{"color":"rgba(238,202,124,1)"},"line":{"color":"rgba(238,202,124,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.91666666666666663],"y":[0.75],"mode":"markers","marker":{"color":"rgba(234,199,136,1)","size":5,"line":{"color":"rgba(234,199,136,1)"}},"type":"scatter","name":"TENNESSEE","textfont":{"color":"rgba(234,199,136,1)"},"error_y":{"color":"rgba(234,199,136,1)"},"error_x":{"color":"rgba(234,199,136,1)"},"line":{"color":"rgba(234,199,136,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.5],"mode":"markers","marker":{"color":"rgba(229,196,148,1)","size":5,"line":{"color":"rgba(229,196,148,1)"}},"type":"scatter","name":"TEXAS","textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"line":{"color":"rgba(229,196,148,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.083333333333333329],"mode":"markers","marker":{"color":"rgba(222,194,153,1)","size":5,"line":{"color":"rgba(222,194,153,1)"}},"type":"scatter","name":"UTAH","textfont":{"color":"rgba(222,194,153,1)"},"error_y":{"color":"rgba(222,194,153,1)"},"error_x":{"color":"rgba(222,194,153,1)"},"line":{"color":"rgba(222,194,153,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.5],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(216,191,157,1)","size":5,"line":{"color":"rgba(216,191,157,1)"}},"type":"scatter","name":"VERMONT","textfont":{"color":"rgba(216,191,157,1)"},"error_y":{"color":"rgba(216,191,157,1)"},"error_x":{"color":"rgba(216,191,157,1)"},"line":{"color":"rgba(216,191,157,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.91666666666666663],"mode":"markers","marker":{"color":"rgba(209,189,162,1)","size":5,"line":{"color":"rgba(209,189,162,1)"}},"type":"scatter","name":"VIRGINIA","textfont":{"color":"rgba(209,189,162,1)"},"error_y":{"color":"rgba(209,189,162,1)"},"error_x":{"color":"rgba(209,189,162,1)"},"line":{"color":"rgba(209,189,162,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66666666666666663],"y":[0.41666666666666669],"mode":"markers","marker":{"color":"rgba(202,186,166,1)","size":5,"line":{"color":"rgba(202,186,166,1)"}},"type":"scatter","name":"WASHINGTON","textfont":{"color":"rgba(202,186,166,1)"},"error_y":{"color":"rgba(202,186,166,1)"},"error_x":{"color":"rgba(202,186,166,1)"},"line":{"color":"rgba(202,186,166,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1],"y":[0],"mode":"markers","marker":{"color":"rgba(194,184,170,1)","size":5,"line":{"color":"rgba(194,184,170,1)"}},"type":"scatter","name":"WEST VIRGINIA","textfont":{"color":"rgba(194,184,170,1)"},"error_y":{"color":"rgba(194,184,170,1)"},"error_x":{"color":"rgba(194,184,170,1)"},"line":{"color":"rgba(194,184,170,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.66666666666666663],"mode":"markers","marker":{"color":"rgba(187,181,175,1)","size":5,"line":{"color":"rgba(187,181,175,1)"}},"type":"scatter","name":"WISCONSIN","textfont":{"color":"rgba(187,181,175,1)"},"error_y":{"color":"rgba(187,181,175,1)"},"error_x":{"color":"rgba(187,181,175,1)"},"line":{"color":"rgba(187,181,175,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.58333333333333337],"y":[0.33333333333333331],"mode":"markers","marker":{"color":"rgba(179,179,179,1)","size":5,"line":{"color":"rgba(179,179,179,1)"}},"type":"scatter","name":"WYOMING","textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Consistently with our previous findings, most states tend to favor presidential candidates more so than Congressional candidates, with this trend being more pronounced for Republican candidates. Notable exceptions are Nebraska, Alaska, Kansas, Delaware and Iowa, where Republican presidential candidates tend to receive fewer votes than Congressional hopefuls.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dem_win_year <span class="ot">&lt;-</span> house_pres_merged_for_plot <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((party <span class="sc">==</span> <span class="st">"DEMOCRAT"</span>) <span class="sc">&amp;</span> (president_more_votes <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, party) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">share_states_president_popular =</span> <span class="fu">n</span>() <span class="sc">/</span> <span class="dv">51</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>rep_win_year <span class="ot">&lt;-</span> house_pres_merged_for_plot <span class="sc">|&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((party <span class="sc">==</span> <span class="st">"REPUBLICAN"</span>) <span class="sc">&amp;</span> (president_more_votes <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, party) <span class="sc">|&gt;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">share_states_president_popular =</span> <span class="fu">n</span>() <span class="sc">/</span> <span class="dv">51</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>dem_rep_win_for_plot <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dem_win_year, rep_win_year)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>dem_rep_win_for_plot2 <span class="ot">&lt;-</span> dem_rep_win_for_plot <span class="sc">|&gt;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a chart</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>drplot2 <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dem_rep_win_for_plot2,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>share_states_president_popular,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="sc">~</span>party,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"scatter"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">"lines+markers"</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Share of States Favoring Presidential Candidates over Congressional"</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">""</span>),</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Share of States"</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">tickformat =</span> <span class="st">".0%"</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend =</span> <span class="fu">list</span>(</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">orientation =</span> <span class="st">"h"</span>, <span class="co"># Horizontal legend</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fl">0.5</span>, <span class="co"># Center horizontally</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">xanchor =</span> <span class="st">"center"</span>, <span class="co"># Align center</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="co"># Position below the plot</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">font =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">8</span>) <span class="co"># Smaller font size</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>drplot2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-5f95b710aacd39022527" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-5f95b710aacd39022527">{"x":{"visdat":{"1bc1c8d5393":["function () ","plotlyVisDat"]},"cur_data":"1bc1c8d5393","attrs":{"1bc1c8d5393":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Share of States Favoring Presidential Candidates over Congressional","xaxis":{"domain":[0,1],"automargin":true,"title":""},"yaxis":{"domain":[0,1],"automargin":true,"title":"Share of States","tickformat":".0%","range":[0,1]},"legend":{"orientation":"h","x":0.5,"xanchor":"center","y":-0.20000000000000001,"font":{"size":8}},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1976,1980,1984,1988,1992,1996,2000,2004,2008,2012,2016,2020],"y":[0.43137254901960786,0.25490196078431371,0.25490196078431371,0.35294117647058826,0.23529411764705882,0.60784313725490191,0.6470588235294118,0.66666666666666663,0.5490196078431373,0.74509803921568629,0.66666666666666663,0.82352941176470584],"mode":"lines+markers","type":"scatter","name":"DEMOCRAT","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1976,1980,1984,1988,1992,1996,2000,2004,2008,2012,2016,2020],"y":[0.80392156862745101,0.78431372549019607,0.90196078431372551,0.84313725490196079,0.21568627450980393,0.098039215686274508,0.68627450980392157,0.80392156862745101,0.84313725490196079,0.76470588235294112,0.41176470588235292,0.49019607843137253],"mode":"lines+markers","type":"scatter","name":"REPUBLICAN","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>As we can see on this chart, in Democratic party, presidential candidates are slowly but surely becoming more popular than their Congressional peers over last 30 years. At the same time, changes in preferences of Republican electorate appear more drastic.</p>
</section>
<section id="task-4-automate-zip-file-extraction" class="level4">
<h4 class="anchored" data-anchor-id="task-4-automate-zip-file-extraction">Task 4: Automate Zip File Extraction</h4>
<blockquote class="blockquote">
<p>Make a function read_shp_from_zip() which takes in a file name, pulls out the .shp file contained there in, and reads it into R using read_sf().</p>
</blockquote>
<p>Here’s the code for the function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a function</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>read_shp_from_zip <span class="ot">&lt;-</span> <span class="cf">function</span>(filename) {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  dest_dir <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  file <span class="ot">&lt;-</span> <span class="fu">unzip</span>(<span class="at">zipfile =</span> filename, <span class="at">exdir =</span> dest_dir)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  shp_file <span class="ot">&lt;-</span> file[<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">.shp$"</span>, file)]</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  sf <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(shp_file)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(sf)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># test a function</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>test_sf <span class="ot">&lt;-</span> <span class="fu">read_shp_from_zip</span>(<span class="st">"districts095.zip"</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test_sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 15 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -118.5993 ymin: 30.62397 xmax: -73.7243 ymax: 43.09876
Geodetic CRS:  NAD83
# A tibble: 6 × 16
  STATENAME ID    DISTRICT STARTCONG ENDCONG DISTRICTSI COUNTY PAGE  LAW   NOTE 
  &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1 Californ… 0060… 27       94        97      &lt;NA&gt;       &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;  "{\"…
2 Georgia   0130… 2        93        97      &lt;NA&gt;       &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;  "{\"…
3 New York  0360… 10       94        97      &lt;NA&gt;       &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;  "{\"…
4 New York  0360… 11       94        97      &lt;NA&gt;       &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;  "{\"…
5 New York  0360… 37       94        97      &lt;NA&gt;       &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;  "{\"…
6 New York  0360… 38       94        97      &lt;NA&gt;       &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;  "{\"…
# ℹ 6 more variables: BESTDEC &lt;chr&gt;, FINALNOTE &lt;chr&gt;, RNOTE &lt;chr&gt;,
#   LASTCHANGE &lt;chr&gt;, FROMCOUNTY &lt;chr&gt;, geometry &lt;MULTIPOLYGON [°]&gt;</code></pre>
</div>
</div>
</section>
<section id="task-5-chloropleth-visualization-of-the-2000-presidential-election-electoral-college-results" class="level4">
<h4 class="anchored" data-anchor-id="task-5-chloropleth-visualization-of-the-2000-presidential-election-electoral-college-results">Task 5: Chloropleth Visualization of the 2000 Presidential Election Electoral College Results</h4>
<blockquote class="blockquote">
<p>Using the data you downloaded earlier, create a chloropleth visualization of the electoral college results for the 2000 presidential election (Bush vs.&nbsp;Gore), coloring each state by the party that won the most votes in that state.</p>
</blockquote>
<p>To create this visualization, first we will determine the winning candidate/party for every state and we will use it to assign color values on the chrolopleth map.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a df with presidential election data</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>pres2000 <span class="ot">&lt;-</span> <span class="fu">sqldf</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="st">  with a as(</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="st">  select year,state,state_po,</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="st">  sum(case when party_simplified='DEMOCRAT' THEN candidatevotes else 0 end) as dem_votes,</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="st">  sum(case when party_simplified='REPUBLICAN' THEN candidatevotes else 0 end) as rep_votes</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="st">  from pres</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="st">  where 1=1</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="st">  and year=2000</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="st">  and party_simplified in ('DEMOCRAT','REPUBLICAN')</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="st">  group by 1,2,3</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="st">  select year,</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="st">  state_po,</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="st">  dem_votes,</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="st">  rep_votes,</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="st">  case</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="st">  when dem_votes&gt;rep_votes then 'Democrat' else 'Republican' end as party_won</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="st">  from a</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="st">  ;</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co"># create a df with ecv data</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>house2000 <span class="ot">&lt;-</span> <span class="fu">sqldf</span>(</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="st">   with h20 as (</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="st">   select</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="st">   state_po,</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="st">   max(district) as num_seats</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="st">   from house</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="st">   where 1=1</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="st">   and year=2000</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="st">   group by 1</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a><span class="st">   )</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a><span class="st">  ,</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a><span class="st">  base as (</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a><span class="st">   select</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="st">   state_po,</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a><span class="st">   case</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a><span class="st">   when num_seats=0 then 1</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a><span class="st">   else num_seats</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a><span class="st">   end as number_of_seats2000</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a><span class="st">   from h20</span></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a><span class="st">  select</span></span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a><span class="st">  state_po,</span></span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a><span class="st">  number_of_seats2000+2 as ecv</span></span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a><span class="st">  from base</span></span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a><span class="st">    ;</span></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a><span class="st">  "</span></span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a><span class="co"># join 2 dfs</span></span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>ecv20_df <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(house2000, pres2000, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_po"</span> <span class="ot">=</span> <span class="st">"state_po"</span>))</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a><span class="do">###### -get a shapefile for map</span></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>map_sf <span class="ot">&lt;-</span> <span class="fu">read_shp_from_zip</span>(<span class="st">"tl_2020_us_state.zip"</span>)</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a><span class="co"># subset data - we only need state abbreviations and coordinates</span></span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>state_map1 <span class="ot">&lt;-</span> map_sf <span class="sc">|&gt;</span></span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STUSPS, geometry)</span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a><span class="co"># create a df with state boundaries and election data</span></span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>el20_for_map <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(state_map1, ecv20_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"STUSPS"</span> <span class="ot">=</span> <span class="st">"state_po"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a plot for 2000 presidential election</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  el20_for_map,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geometry =</span> geometry,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> party_won</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Democrat"</span> <span class="ot">=</span> <span class="st">"blue"</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Republican"</span> <span class="ot">=</span> <span class="st">"red"</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"2020 Election Results by State"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="task-6-advanced-chloropleth-visualization-of-electoral-college-results" class="level4">
<h4 class="anchored" data-anchor-id="task-6-advanced-chloropleth-visualization-of-electoral-college-results">Task 6: Advanced Chloropleth Visualization of Electoral College Results</h4>
<blockquote class="blockquote">
<p>Modify your previous code to make either a faceted version showing election results over time.</p>
</blockquote>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a df with presidential election data</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>pres_elections_temp <span class="ot">&lt;-</span> pres <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_simplified <span class="sc">==</span> <span class="st">"DEMOCRAT"</span> <span class="sc">|</span> party_simplified <span class="sc">==</span> <span class="st">"REPUBLICAN"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state_po, party_simplified) <span class="sc">|&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">votes =</span> <span class="fu">sum</span>(candidatevotes))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># pivot for plot</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>pres_elections_temp2 <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(pres_elections_temp,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># id_cols=(year,state_po),</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">names_from =</span> party_simplified,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">values_from =</span> votes</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># add new column with winning party</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>pres_elections_temp2 <span class="ot">&lt;-</span> pres_elections_temp2 <span class="sc">|&gt;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party_won =</span> <span class="fu">case_when</span>(DEMOCRAT <span class="sc">&gt;</span> REPUBLICAN <span class="sc">~</span> <span class="st">"Democrat"</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Republican"</span>))</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="co"># create a df with state boundaries and election data</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>el20_for_map_overtime <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(state_map1, pres_elections_temp2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"STUSPS"</span> <span class="ot">=</span> <span class="st">"state_po"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a plot for 2000 presidential election</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  el20_for_map_overtime,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">geometry =</span> geometry,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> party_won</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Democrat"</span> <span class="ot">=</span> <span class="st">"blue"</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Republican"</span> <span class="ot">=</span> <span class="st">"red"</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">factor</span>(year), <span class="at">labeller =</span> <span class="fu">as_labeller</span>(<span class="cf">function</span>(x) <span class="fu">paste</span>(<span class="st">"year:"</span>, x)), <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"US Presidential Election Results Over Time"</span>) <span class="sc">+</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span>),</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span>), <span class="co"># Increase legend label text size</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span>), <span class="co"># Increase legend title text size</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">3</span>, <span class="st">"lines"</span>),</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">24</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>p1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="2880"></p>
</figure>
</div>
</div>
</div>
<p>As we can see on this plot, the changes in the U.S. electoral map reflect significant shifts in political alignments, resulting in a very polarized and competitive landscape, especially lately.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/annaol\.github\.io\/STA9750-2024-FALL\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>